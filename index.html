<!DOCTYPE html>
<html lang="zh">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Todo List AE - AEå¾…åŠäº‹é¡¹æ‰©å±•</title>
    <meta name="keywords" content="After Effectsæ‰©å±•,AEæ‰©å±•,TodoList,å¾…åŠäº‹é¡¹,AEå¾…åŠäº‹é¡¹,Todoæ¸…å•,å·¥ä½œç®¡ç†,ä»»åŠ¡è·Ÿè¸ª,AEå·¥ä½œæµ" />
    <meta name="description" content="UINeed-Todo-AEæ˜¯ä¸€æ¬¾é€‚ç”¨äºAfter Effectsçš„å¾…åŠäº‹é¡¹æ‰©å±•ï¼Œå¸®åŠ©ä½ åœ¨AEä¸­ç®¡ç†å·¥ä½œä»»åŠ¡ï¼Œæé«˜åˆ›ä½œæ•ˆç‡ã€‚" />
    <link type="favicon" rel="shortcut icon" href="public/img/favicon.png" />
    <!-- GitHub Pages é€‚é…å™¨è„šæœ¬ -->
    <script src="public/js/github-pages-adapter.js"></script>
        <link href="public/css/normalize.css" rel="stylesheet" media="screen">
        <link href="public/css/style.min.css" rel="stylesheet" media="screen">
    
    <!-- åŠ è½½æ€æºé»‘ä½“å­—ä½“ -->
    <style>
        @font-face {
            font-family: "SourceHanSansSC-Medium-2";
            src: url("public/front/SourceHanSansSC-Medium-2.otf") format("opentype");
            font-weight: normal;
            font-style: normal;
        }
    </style>
    
    <!-- è‡ªå®šä¹‰åŠ¨ç”»æ ·å¼ -->
    <style>
        /* ä¼˜åŒ–è¿›åœºåŠ¨ç”» */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translate3d(0, 20px, 0);
                max-height: 0;
            }
            to {
                opacity: 1;
                transform: translate3d(0, 0, 0);
                max-height: 120px;
            }
        }
        
        /* æ”¹è¿›çš„é¡¹ç›®åŠ¨ç”»æ•ˆæœ */
        .todo-item {
            will-change: opacity, transform, max-height;
            backface-visibility: hidden;
            transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), 
                        box-shadow 0.3s cubic-bezier(0.34, 1.56, 0.64, 1),
                        opacity 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            transform-origin: center top;
            padding: 0;
            margin-bottom: 8px !important;  /* å‡å°‘é¡¹ç›®é—´è· */
        }
        
        /* å‡å°‘å†…å®¹åŒºåŸŸçš„å†…è¾¹è· */
        .todo-content {
            padding: 8px 48px !important;  /* å‡å°‘å†…è¾¹è· */
            min-height: 38px !important;   /* å‡å°‘æœ€å°é«˜åº¦ */
        }
        
        /* è°ƒæ•´æŒ‰é’®ä½ç½® */
        .btn-finish, .btn-unfinish {
            top: 6px !important;
            left: 10px !important;
            width: 26px !important;  /* å‡å°æŒ‰é’®å°ºå¯¸ */
            height: 26px !important;
        }
        
        .btn-delete, .btn-restore, .btn-edit-submit {
            top: 6px !important;
            right: 10px !important;
            width: 26px !important;  /* å‡å°æŒ‰é’®å°ºå¯¸ */
            height: 26px !important;
        }
        
        .todo-item:hover {
            transform: translateY(-2px);
            opacity: 0.95;
        }
        
        .drag-move {
            transition: all 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) !important;
        }
        
        .todo-list li {
            backface-visibility: hidden;
            will-change: opacity, transform, max-height;
            transform-origin: center top;
        }
        
        /* æé«˜é€æ˜åº¦å˜åŒ–çš„å¯¹æ¯”åº¦ */
        .drag-enter-active {
            opacity: 0 !important;
        }
        
        /* æ•´ä½“åˆ—è¡¨å¸ƒå±€è°ƒæ•´ */
        .todo-list {
            padding: 16px 28px 20px !important;  /* å‡å°‘åˆ—è¡¨å†…è¾¹è· */
        }
        
        /* å‡å°‘åº•éƒ¨ä¿¡æ¯æ çš„é«˜åº¦ */
        .bar-message {
            height: 36px !important;
            line-height: 36px !important;
        }
        
        /* ä¼˜åŒ–å¼¹å‡ºåŠ¨ç”»æ•ˆæœ */
        .popIn {
            animation-name: popIn;
            animation-duration: 0.5s;
            animation-timing-function: cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        /* æ·»åŠ äº¤äº’åŠ¨æ•ˆ */
        .todo-btn {
            transition: all 0.2s cubic-bezier(0.34, 1.56, 0.64, 1) !important;
        }
        
        .todo-btn:hover {
            transform: translate(-2px, -2px) scale(1.05) !important;
        }
        
        .add-content-wrapper.show-input {
            /* animation: bounceIn 0.5s cubic-bezier(0.34, 1.56, 0.64, 1); */ /* æ—§åŠ¨ç”» 1 */
            /* animation: gentlePopIn 0.4s ease-out forwards; */ /* æ—§åŠ¨ç”» 2 */
            animation: slideDownFadeInScaleUp 0.45s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards; /* æ–°åŠ¨ç”» */
        }
        
        /* @keyframes bounceIn { ... } */ /* æ—§çš„ bounceIn åŠ¨ç”»å®šä¹‰å·²æ³¨é‡Š */

        /* @keyframes gentlePopIn { ... } */ /* æ—§çš„ gentlePopIn åŠ¨ç”»å®šä¹‰å·²æ³¨é‡Š */

        @keyframes slideDownFadeInScaleUp { /* æ–°çš„ slideDownFadeInScaleUp åŠ¨ç”»å®šä¹‰ */
            0% {
                opacity: 0;
                transform: translate(-50%, -70%) scale(0.9);
            }
            100% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
        }
        
        /* è°ƒæ•´è¾“å…¥æ¡†é«˜åº¦ */
        .add-content {
            height: 52px !important;
            line-height: 52px !important;
        }
        
        .submit-btn {
            height: 48px !important;
            line-height: 48px !important;
            width: 80px !important;
        }

        /* ä¸º.btn-smallæ·»åŠ æ‚¬æµ®æ•ˆæœ */
        .btn-small:hover {
            /* background-color: #f0f0f0; /* å·²ç§»é™¤ï¼šæ­¤è¡Œç¡®ä¿ä¸è¦†ç›–åŸæœ‰çš„èƒŒæ™¯è‰²hoveræ•ˆæœ */
            transform: translateY(-1px); /* è½»å¾®ä¸Šç§» */
            box-shadow: 0 2px 4px rgba(0,0,0,0.1); /* æ·»åŠ ç»†å¾®é˜´å½± */
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out; /* æ›´æ–°è¿‡æ¸¡æ•ˆæœï¼Œç§»é™¤background-color */
        }

        /* ç§»é™¤ä¹‹å‰ä¸º #saveLocal:hover çš„ç‰¹å®šæ ·å¼ */
        /* #saveLocal:hover {
            background-color: #e9e9e9; 
        } */

        /* ä¸ºæ–°çš„ .btn-data-action ç±»å®šä¹‰ç»Ÿä¸€çš„é»„è‰²æ‚¬æµ®èƒŒæ™¯ */
        .btn-data-action:hover {
            background-color: #ffeb3b; /* ä¸€ä¸ªæ˜äº®çš„é»„è‰²ï¼Œè¯·æ ¹æ®å®é™…éœ€è¦è°ƒæ•´ */
            color: #333; /* ç¡®ä¿æ–‡æœ¬åœ¨é»„è‰²èƒŒæ™¯ä¸Šå¯è¯» */
            /* è¿™é‡Œçš„ transform å’Œ box-shadow ä¼šè¢« .btn-small:hover çš„è§„åˆ™è¦†ç›–ï¼Œå¦‚æœéœ€è¦ä¸åŒæ•ˆæœåˆ™éœ€è°ƒæ•´ */
        }

        /* å¿«é€ŸæŒ‡å—æŒ‰é’®æ ·å¼ */
        .action-quick-guide:hover,
        .action-quick-guide.selected {
            background: var(--bg-submit);
            color: #333;
        }
        
        /* æ·»åŠ å¿«é€ŸæŒ‡å—åˆ—è¡¨æ ·å¼ */
        .quick-guide-list {
            list-style-type: disc;
            padding-left: 20px;
            margin: 0;
            text-align: left;
        }
        
        .quick-guide-list li {
            margin-bottom: 10px;
            line-height: 1.5;
        }
        
        .quick-guide-list b {
            color: var(--font-color);
            font-weight: 700;
        }

        #panda{
            position:absolute;
            width:200px;
            height:200px;
            right:-72px;
            bottom:-2px;
        }
    </style>
    
    <!-- CEP Extension Libraries -->
    <script src="lib/CSInterface.js"></script>
    <script src="lib/jquery-1.9.1.js"></script>
    
        <script>
        // å›ºå®šè¯­è¨€ä¸ºä¸­æ–‡
        localStorage.setItem('uiineed-todos-lang', 'zh');
        
        // åˆå§‹åŒ–CSInterface
        var csInterface;
        try {
            csInterface = new CSInterface();
        } catch(e) {
            console.log("æœªåœ¨CEPç¯å¢ƒä¸­è¿è¡Œï¼ŒCSInterfaceåˆå§‹åŒ–å¤±è´¥:", e);
        }

        // æ·»åŠ ç‚¹å‡»äº‹ä»¶å’Œæ‚¬æµ®æç¤º
        document.addEventListener('DOMContentLoaded', function() {
            var todoLogo = document.querySelector('.title img.title-1');
            var addContentWrapper = document.querySelector('.add-content-wrapper');
            
            if (todoLogo && addContentWrapper) {
                todoLogo.style.cursor = 'pointer';
                
                todoLogo.addEventListener('click', function() {
                    addContentWrapper.classList.add('show-input');
                    // è®©è¾“å…¥æ¡†è·å¾—ç„¦ç‚¹
                    setTimeout(function() {
                        var inputElement = addContentWrapper.querySelector('.add-content');
                        if (inputElement) {
                            inputElement.focus();
                        }
                    }, 300);
                });
                
                document.addEventListener('click', function(e) {
                    if (!addContentWrapper.contains(e.target) && !todoLogo.contains(e.target) && addContentWrapper.classList.contains('show-input')) {
                        closeInputWithAnimation();
                    }
                });
                
                // æ·»åŠ ESCé”®å…³é—­è¾“å…¥æ¡†
                document.addEventListener('keydown', function(e) {
                    if (e.key === 'Escape' && addContentWrapper.classList.contains('show-input')) {
                        closeInputWithAnimation();
                    }
                });
                
                // æ·»åŠ åŠ¨ç”»å…³é—­åŠŸèƒ½
                function closeInputWithAnimation() {
                    addContentWrapper.classList.add('hiding');
                    setTimeout(function() {
                        addContentWrapper.classList.remove('show-input');
                        setTimeout(function() {
                            addContentWrapper.classList.remove('hiding');
                        }, 300);
                    }, 50);
                }
            }
        });
        </script>
    <style>
        /* è‡ªå®šä¹‰å¼¹çª—æ ·å¼ */
        .custom-alert-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }
        
        .custom-alert {
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            width: 280px; /* ä¿®æ”¹ï¼šå®½åº¦ä»360pxå‡å°åˆ°300px */
            max-width: 90%;
            padding: 15px; /* ä¿®æ”¹ï¼šå†…è¾¹è·ä»20pxå‡å°åˆ°15px */
            animation: popIn 0.3s forwards;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        }
        
        .custom-alert-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 10px; /* ä¿®æ”¹ï¼šä¸‹è¾¹è·ä»12pxå‡å°åˆ°10px */
            color: #333;
            text-align: center; /* æ–°å¢ï¼šæ–‡æœ¬å±…ä¸­ */
        }
        
        .custom-alert-content {
            font-size: 16px;
            line-height: 1.5;
            margin-bottom: 15px; /* ä¿®æ”¹ï¼šä¸‹è¾¹è·ä»20pxå‡å°åˆ°15px */
            color: #555;
            text-align: center; /* æ–°å¢ï¼šæ–‡æœ¬å±…ä¸­ */
        }
        
        .custom-alert-buttons {
            display: flex;
            justify-content: center; /* ä¿®æ”¹ï¼šä»flex-endæ”¹ä¸ºcenterï¼Œä½¿æŒ‰é’®å±…ä¸­ */
            gap: 10px;
        }
        
        .custom-alert-btn {
            padding: 8px 16px;
            border-radius: 4px;
            border: none;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: 500;
        }
        
        .custom-alert-btn.cancel {
            background-color: #f0f0f0;
            color: #333;
        }
        
        .custom-alert-btn.cancel:hover {
            background-color: #e0e0e0;
        }
        
        .custom-alert-btn.confirm {
            background-color: #4a7bff;
            color: white;
        }
        
        .custom-alert-btn.confirm:hover {
            background-color: #3a6ae0;
        }
        
        @keyframes popIn {
            0% {
                transform: scale(0.8);
                opacity: 0;
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }
        
        @keyframes popOut {
            0% {
                transform: scale(1);
                opacity: 1;
            }
            100% {
                transform: scale(0.8);
                opacity: 0;
            }
        }
        
        /* è‡ªå®šä¹‰å¾…åŠäº‹é¡¹è¾“å…¥åŒºåŸŸæ‚¬æµ®äº¤äº’ */
        .container.header {
            position: relative;
            height: 60px;
            overflow: visible;
        }
        
        .title {
            position: relative;
        }
        
        .add-content-wrapper {
            position: fixed;
            left: 50%;
            top: -100vh;
            transform: translateX(-50%);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            opacity: 0;
            z-index: 100;
            width: 80%;
            max-width: 700px;
            pointer-events: none;
        }
        
        .add-content-wrapper.show-input {
            top: 50%;
            transform: translate(-50%, -50%);
            opacity: 1;
            pointer-events: auto;
        }
        
        .add-content-wrapper.hiding {
            top: 70%;
            opacity: 0;
            transition: all 0.3s ease-out;
        }
        
        @keyframes slideFadeIn {
            0% {
                transform: translateY(20px);
                opacity: 0;
            }
            100% {
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        @keyframes slideFadeOut {
            0% {
                transform: translateY(0);
                opacity: 1;
            }
            100% {
                transform: translateY(20px);
                opacity: 0;
            }
        }
        
        /* å¿«é€ŸæŒ‡å—åŠ¨ç”» */
        @keyframes fadeIn {
            0% {
                opacity: 0;
            }
            100% {
                opacity: 1;
            }
        }
        
        @keyframes fadeOut {
            0% {
                opacity: 1;
            }
            100% {
                opacity: 0;
            }
        }
        
        @keyframes popOut {
            0% {
                transform: scale(1);
                opacity: 1;
            }
            100% {
                transform: scale(0.8);
                opacity: 0;
            }
        }
        
        /* å¿«é€ŸæŒ‡å—å¼¹çª—å“åº”å¼æ ·å¼ */
        @media only screen and (max-width: 768px) {
            .quick-guide-dialog {
                width: 95% !important;
                max-width: 400px !important;
                margin: 10px !important;
                transform: scale(0.95);
                transform-origin: center;
            }
            
            .quick-guide-title {
                font-size: 20px !important;
                margin-bottom: 15px !important;
            }
            
            .quick-guide-item {
                margin-bottom: 8px !important;
            }
            
            .quick-guide-content {
                padding: 8px 45px !important;
                min-height: 40px !important;
            }
            
            .quick-guide-icon {
                width: 28px !important;
                height: 28px !important;
                left: 8px !important;
            }
            
            .quick-guide-btn {
                padding: 8px 16px !important;
                font-size: 14px !important;
            }
        }
        
        /* æ‰‹æœºç«¯æ›´å°å±å¹•é€‚é… */
        @media only screen and (max-width: 480px) {
            .quick-guide-dialog {
                width: 98% !important;
                max-width: 380px !important;
                margin: 5px !important;
                transform: scale(0.9);
            }
            
            .quick-guide-content {
                padding: 6px 42px !important;
                min-height: 38px !important;
            }
            
            .quick-guide-icon {
                width: 24px !important;
                height: 24px !important;
                left: 8px !important;
                font-size: 16px !important;
            }
        }
        
        .add-content {
            animation: slideFadeIn 0.3s ease-out forwards;
        }
        
        .add-content-wrapper.hiding .add-content {
            animation: slideFadeOut 0.3s ease-in forwards;
        }
        
        .bar-bottom {
            position: relative;
            cursor: pointer;
        }

        /* ä¾§è¾¹æ åŠ¨ç”»æ ·å¼ */
        .side-bar {
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        /* ä¾§è¾¹æ è¿›åœºåŠ¨ç”» */
        @keyframes sidebarEnter {
            0% {
                opacity: 0;
                transform: translateX(30px);
            }
            100% {
                opacity: 1;
                transform: translateX(0);
            }
        }

        /* ä¾§è¾¹æ é€€åœºåŠ¨ç”» */
        @keyframes sidebarExit {
            0% {
                opacity: 1;
                transform: translateX(0);
            }
            100% {
                opacity: 0;
                transform: translateX(30px);
            }
        }

        /* æ‰‹æœºç«¯ä¾§è¾¹æ åŠ¨ç”» */
        @media only screen and (max-width: 768px) {
            @keyframes sidebarEnter {
                0% {
                    opacity: 0;
                    transform: translateX(-30px);
                }
                100% {
                    opacity: 1;
                    transform: translateX(0);
                }
            }

            @keyframes sidebarExit {
                0% {
                    opacity: 1;
                    transform: translateX(0);
                }
                100% {
                    opacity: 0;
                    transform: translateX(-30px);
                }
            }
        }

        /* åŠ¨ç”»ç±» */
        .sidebar-enter-active {
            animation: sidebarEnter 0.3s forwards;
        }

        .sidebar-exit-active {
            animation: sidebarExit 0.3s forwards;
        }
    </style>
        <script>
        // ä¿å­˜åŸç”Ÿalertå¤‡ç”¨
        const nativeAlert = window.alert;

        // é‡å†™alertæ–¹æ³•
        window.alert = function(message, title = 'æç¤º') {
            return new Promise((resolve) => {
                const overlay = document.createElement('div'); // é®ç½©å±‚
                overlay.className = 'custom-alert-overlay';
                const alertBox = document.createElement('div'); // æç¤ºæ¡†
                alertBox.className = 'custom-alert';
                alertBox.innerHTML = `
<div class="custom-alert-title">${title}</div>
<div class="custom-alert-content">${message}</div>
<div class="custom-alert-buttons">
    <button class="custom-alert-btn confirm">ç¡®å®š</button>
</div>
                `;
                overlay.appendChild(alertBox);
                document.body.appendChild(overlay);
                const confirmBtn = alertBox.querySelector('.confirm');
                confirmBtn.addEventListener('click', () => {
                    alertBox.style.animation = 'popOut 0.3s forwards';
                    setTimeout(() => {
                        document.body.removeChild(overlay);
                        resolve(true);
                    }, 300);
                });
                overlay.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape') confirmBtn.click();
                });
                confirmBtn.focus();
            });
        };

        // ä¿å­˜åŸç”Ÿconfirmå¤‡ç”¨
        const nativeConfirm = window.confirm;

        // é‡å†™confirmæ–¹æ³•
        window.confirm = function(message, title = 'è¯·ç¡®è®¤') {
            return new Promise((resolve) => {
                const overlay = document.createElement('div');
                overlay.className = 'custom-alert-overlay';
                const alertBox = document.createElement('div');
                alertBox.className = 'custom-alert';
                alertBox.innerHTML = `
<div class="custom-alert-title">${title}</div>
<div class="custom-alert-content">${message}</div>
<div class="custom-alert-buttons">
    <button class="custom-alert-btn cancel">å–æ¶ˆ</button>
    <button class="custom-alert-btn confirm">ç¡®å®š</button>
</div>
                `;
                overlay.appendChild(alertBox);
                document.body.appendChild(overlay);
                const confirmBtn = alertBox.querySelector('.confirm');
                const cancelBtn = alertBox.querySelector('.cancel');
                confirmBtn.addEventListener('click', () => {
                    alertBox.style.animation = 'popOut 0.3s forwards';
                    setTimeout(() => {
                        document.body.removeChild(overlay);
                        resolve(true);
                    }, 300);
                });
                cancelBtn.addEventListener('click', () => {
                    alertBox.style.animation = 'popOut 0.3s forwards';
                    setTimeout(() => {
                        document.body.removeChild(overlay);
                        resolve(false);
                    }, 300);
                });
                overlay.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape') cancelBtn.click();
                });
                cancelBtn.focus();
            });
        };
        </script>
    <!-- Vue 2.x  Todo List   ä½¿ç”¨CDNå°±æ— éœ€å¼•å…¥æœ¬åœ°æ–‡ä»¶ -->
        <!-- <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script> -->
        <script src="public/js/vue.js"></script>
    </head>
    <body>
        <div class="bg-pattern"></div>
        <div class="todo-wrapper">
        <div id="todo-app" class="todo-app" >
                <div class="container header ">
                    <div class="todo-input">
                        <h1 class="title">
                            <img src="public/img/todo.svg" alt="" class="title-1" draggable="false" title="ç‚¹å‡»åˆ›å»ºä»»åŠ¡">
                            <div class="ani-vector">
                                <span></span>
                                <span></span>
                            </div>
                            <div class="pendulums">
                                <div class="pendulum">
                                    <div class="bar"></div>
                                    <div class="motion">
                                        <div class="string"></div>
                                        <div class="weight"></div>
                                    </div>
                                </div>
                                <div class="pendulum shadow">
                                    <div class="bar"></div>
                                    <div class="motion">
                                        <div class="string"></div>
                                        <div class="weight"></div>
                                    </div>
                                </div>
                            </div>
                        </h1>
                        <div class="add-content-wrapper">
                        <input type="text" rows="3" class="add-content" placeholder="æ–°å¢å¾…åŠäº‹é¡¹..." v-model="newTodoTitle"
                            @keyup.enter="addTodo" :class='{empty:emptyChecked}' />
                            <transition name="tips">
                            <div class="tips" v-if='emptyChecked' style="color:red">ğŸ’¡è¯·è¾“å…¥å†…å®¹ï¼</div>
                            </transition>
                        <button class="btn submit-btn" type="button" @click="addTodo">æäº¤</button>
                        </div>

                    </div>
                </div>
                <div class="container main">
                    <div class="todo-list-box">
                        <div class="bar-message">
                        <input type="button" class="btn btn-label btn-allFinish" value="å…¨éƒ¨æ ‡ä¸ºå®Œæˆ"
                            @click="markAllAsCompleted" v-if="todos.length || recycleBin.length" />
                            <template>
                                <div>
                                    <div v-if="!isEditing" @dblclick="editText" class="bar-message-text">
                                        {{ slogan }}
                                    </div>
                                <div v-else>
                                    <input v-model="slogan" ref="sloganInput" class="slogan-input"  @keyup.enter="saveText" @keyup.esc="cancelText"/>
                                        <div class="todo-btn btn-edit-submit slogan-btn" @click="saveText"><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTkiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAxOSAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTE2LjUwODQgMTAuMzEwOUMxNy4yMzI0IDEwLjU4MjMgMTguMDM5NCAxMC4yMTU1IDE4LjMxMDkgOS40OTE1N0MxOC41ODIzIDguNzY3NiAxOC4yMTU1IDcuOTYwNjMgMTcuNDkxNiA3LjY4OTE0TDE2LjUwODQgMTAuMzEwOVpNOC45OTk5IDJMMTAuMTMyMSAxLjE3NjU1QzkuODU1OCAwLjc5NjYxOCA5LjQwNzM1IDAuNTgwNjA1IDguOTM4MDIgMC42MDEzNjhDOC40Njg3IDAuNjIyMTMgOC4wNDEwNyAwLjg3Njg5OSA3Ljc5OTM4IDEuMjc5NzRMOC45OTk5IDJaTTcuNjcxNzUgMTcuNTU3MkM3LjQyNzIyIDE4LjI5MDcgNy44MjM2MiAxOS4wODM2IDguNTU3MTMgMTkuMzI4MUM5LjI5MDY0IDE5LjU3MjcgMTAuMDgzNSAxOS4xNzYzIDEwLjMyOCAxOC40NDI4TDcuNjcxNzUgMTcuNTU3MlpNMS4wOTk2MyA3LjkyNzkzQzAuNTA3NTQxIDguNDI1MTkgMC40MzA2NjkgOS4zMDgyOCAwLjkyNzkzMSA5LjkwMDM3QzEuNDI1MTkgMTAuNDkyNSAyLjMwODI4IDEwLjU2OTMgMi45MDAzNyAxMC4wNzIxTDEuMDk5NjMgNy45Mjc5M1pNMTcuNDkxNiA3LjY4OTE0QzE1LjgwMjMgNy4wNTU2NSAxMy45ODQxIDUuNTAzNiAxMi41MDk5IDMuOTY3OTVDMTEuNzkzIDMuMjIxMjIgMTEuMTkzOSAyLjUxNzQgMTAuNzc0NCAyLjAwMDU2QzEwLjU2NTEgMS43NDI2OSAxMC40MDE3IDEuNTMyNzYgMTAuMjkxOSAxLjM4OTA4QzEwLjIzNyAxLjMxNzI3IDEwLjE5NTYgMS4yNjIxMSAxMC4xNjg2IDEuMjI1OUMxMC4xNTUxIDEuMjA3OCAxMC4xNDUzIDEuMTk0NDQgMTAuMTM5MSAxLjE4NjEyQzEwLjEzNjEgMS4xODE5NSAxMC4xMzQgMS4xNzkwNSAxMC4xMzI4IDEuMTc3NDRDMTAuMTMyMiAxLjE3NjY0IDEwLjEzMTggMS4xNzYxNiAxMC4xMzE3IDEuMTc2MDFDMTAuMTMxNyAxLjE3NTkzIDEwLjEzMTcgMS4xNzU5NCAxMC4xMzE3IDEuMTc2MDNDMTAuMTMxOCAxLjE3NjA3IDEwLjEzMTkgMS4xNzYyIDEwLjEzMTkgMS4xNzYyM0MxMC4xMzIgMS4xNzYzNyAxMC4xMzIxIDEuMTc2NTUgOC45OTk5IDJDNy44Njc2NyAyLjgyMzQ1IDcuODY3ODMgMi44MjM2NyA3Ljg2OCAyLjgyMzlDNy44NjgwOCAyLjgyNDAxIDcuODY4MjYgMi44MjQyNiA3Ljg2ODQyIDIuODI0NDdDNy44Njg3MiAyLjgyNDkgNy44NjkwOSAyLjgyNTQgNy44Njk1MyAyLjgyNTk5QzcuODcwMzkgMi44MjcxOCA3Ljg3MTUgMi44Mjg2OSA3Ljg3Mjg1IDIuODMwNTRDNy44NzU1NCAyLjgzNDIzIDcuODc5MjIgMi44MzkyNCA3Ljg4Mzg1IDIuODQ1NTNDNy44OTMxIDIuODU4MTEgNy45MDYxOSAyLjg3NTgyIDcuOTIyOTggMi44OTgzN0M3Ljk1NjU2IDIuOTQzNDUgOC4wMDQ5OSAzLjAwNzkyIDguMDY3MyAzLjA4OTQ0QzguMTkxODUgMy4yNTIzOSA4LjM3MjE3IDMuNDgzODcgOC42MDAzOCAzLjc2NTA2QzkuMDU1OTMgNC4zMjYzNSA5LjcwNjg1IDUuMDkxMjggMTAuNDkgNS45MDcwNUMxMi4wMTU4IDcuNDk2NCAxNC4xOTc3IDkuNDQ0MzUgMTYuNTA4NCAxMC4zMTA5TDE3LjQ5MTYgNy42ODkxNFpNNy42MTM5NyAyLjE5ODAxQzguMTA2NjkgNS42NDY2OSA4LjM0OTk3IDguODI5MjYgOC4zNDk5NyAxMS41QzguMzQ5OTcgMTQuMjAxNSA4LjEwMDE0IDE2LjI3MjIgNy42NzE3NSAxNy41NTcyTDEwLjMyOCAxOC40NDI4QzEwLjg5OTggMTYuNzI3OCAxMS4xNSAxNC4yOTg2IDExLjE1IDExLjVDMTEuMTUgOC42NzA3NiAxMC44OTMyIDUuMzUzMzEgMTAuMzg1OCAxLjgwMTk5TDcuNjEzOTcgMi4xOTgwMVpNMi45MDAzNyAxMC4wNzIxQzMuODgyMjggOS4yNDc0MiA1LjI5NjM2IDguMDkwMzMgNi42NDM3OSA2LjgzMDFDNy45NzY2NCA1LjU4MzUyIDkuMzQ1ODcgNC4xNDQ1OCAxMC4yMDA0IDIuNzIwMjZMNy43OTkzOCAxLjI3OTc0QzcuMTU0MDIgMi4zNTU0MiA2LjAyMzMxIDMuNTc2NjMgNC43MzExOCA0Ljc4NTEzQzMuNDUzNjQgNS45Nzk5OCAyLjExNzcyIDcuMDcyODkgMS4wOTk2MyA3LjkyNzkzTDIuOTAwMzcgMTAuMDcyMVoiIGZpbGw9IiMzMzMyMkUiLz4KPC9zdmc+Cg==" alt="Finish"></div>
                                    </div>
                                </div>
                            </template>
                        </div>

                        <ul v-if="!todos.length && showEmptyTips" class="empty-tips">
                        <li> æ·»åŠ ä½ çš„ç¬¬ä¸€ä¸ªå¾…åŠäº‹é¡¹ï¼ğŸ“</li>
                        <li>é£Ÿç”¨æ–¹æ³•ğŸ’¡ï¼š</li>
                        <li>âœ”ï¸ ç‚¹å‡»æ ‡é¢˜æ·»åŠ ä»»åŠ¡</li>
                        <li>âœ”ï¸ æ‰€æœ‰æäº¤æ“ä½œæ”¯æŒEnterå›è½¦é”®æäº¤</li>
                        <li>âœ”ï¸ æ‹–æ‹½Todoä¸Šä¸‹ç§»åŠ¨å¯æ’åº</li>
                        <li>âœ”ï¸ åŒå‡»ä¸Šé¢çš„æ ‡è¯­å’Œ Todo å¯è¿›è¡Œç¼–è¾‘</li>
                        <li>âœ”ï¸ å³ä¾§çš„å°çª—å£æ˜¯å¿«æ·æ“ä½œå“¦</li>
                        <li>ğŸ”’ æ‰€æœ‰çš„Todoæ•°æ®å­˜å‚¨åœ¨æœ¬åœ°</li>
                        <li>ğŸ“ æ”¯æŒä¸‹è½½ã€å¯¼å‡ºå’Œå¯¼å…¥ï¼Œå¯¼å…¥è¿½åŠ åˆ°å½“å‰åºåˆ—</li>
                        </ul>

                    <transition-group name="drag" class="todo-list" tag="ul" mode="out-in" @before-enter="beforeEnter"
                    @enter="enter" @after-enter="afterEnter"
                            :css="false"
                    appear>

                        <li v-for='(todo, index) in filteredTodos' :key='todo.id' class='todo-item'
                            @dragenter="dragenter($event, index)" @dragover="dragover($event, index)"
                                @dragstart="dragstart(index)"
                                :data-delay="index * 80 * delayTime"
                                v-show="show"
                                :draggable="!(editedTodo !== null && editedTodo.id === todo.id)">
                            <div class="todo-content" :class='{completed:todo.completed}' @dblclick="editdTodo(todo)">
                                    {{todo.title}}</div>
                            <!-- æ ‡è®°å®Œæˆ -->
                            <div class="todo-btn btn-finish" v-if="!todo.completed" @click="markAsCompleted(todo)">
                                </div>
                            <!-- æ ‡ä¸ºæœªå®Œæˆ -->
                            <div class="todo-btn btn-unfinish" v-if="todo.completed" @click="markAsUncompleted(todo)">
                                <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAyNCAxOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTIuMzYzMTcgOS42NzUwNkMxLjU1OTM5IDkuNDc0NDkgMC43NDUyMDQgOS45NjM0OCAwLjU0NDYyOSAxMC43NjczQzAuMzQ0MDU0IDExLjU3MSAwLjgzMzA0NyAxMi4zODUyIDEuNjM2ODMgMTIuNTg1OEwyLjM2MzE3IDkuNjc1MDZaTTguMTU4NzMgMTZMNi43ODA0MSAxNi41OTE4QzcuMDMwOTggMTcuMTc1NCA3LjYyMTk1IDE3LjUzNzkgOC4yNTU3NSAxNy40OTY5QzguODg5NTQgMTcuNDU1OCA5LjQyODc3IDE3LjAyIDkuNjAxOTEgMTYuNDA4OUw4LjE1ODczIDE2Wk0yMi4zMjYxIDMuNDY0MTNDMjMuMTM0NyAzLjI4NDA2IDIzLjY0NDIgMi40ODI1NyAyMy40NjQxIDEuNjczOTVDMjMuMjg0MSAwLjg2NTMyOCAyMi40ODI2IDAuMzU1NzkxIDIxLjY3MzkgMC41MzU4NjZMMjIuMzI2MSAzLjQ2NDEzWk0xLjYzNjgzIDEyLjU4NThDMi4wMjc2NCAxMi42ODMzIDMuMTIyOTkgMTMuMTUxIDQuMjc3OCAxMy45NDI2QzUuNDM5ODggMTQuNzM5MyA2LjM4OTA2IDE1LjY4MDMgNi43ODA0MSAxNi41OTE4TDkuNTM3MDUgMTUuNDA4MkM4LjgxMDk0IDEzLjcxNzEgNy4zMDE1NyAxMi4zNzgzIDUuOTc0MDYgMTEuNDY4MkM0LjYzOTI3IDEwLjU1MzIgMy4yMTM5OSA5Ljg4NzM4IDIuMzYzMTcgOS42NzUwNkwxLjYzNjgzIDEyLjU4NThaTTkuNjAxOTEgMTYuNDA4OUMxMC4xMzU5IDE0LjUyNDQgMTEuNDk0OCAxMS42NTg1IDEzLjY3MjcgOS4wNjM5NUMxNS44NDQ1IDYuNDc2NzUgMTguNzQxNyA0LjI2MjM1IDIyLjMyNjEgMy40NjQxM0wyMS42NzM5IDAuNTM1ODY2QzE3LjI1ODMgMS41MTkyIDEzLjgyNzUgNC4yMTM0MiAxMS4zNzQ5IDcuMTM1MTRDOC45Mjg1MiAxMC4wNDk1IDcuMzY2NzQgMTMuMjkyOSA2LjcxNTU1IDE1LjU5MTFMOS42MDE5MSAxNi40MDg5WiIgZmlsbD0iIzMzMzIyRSIvPgo8L3N2Zz4K"
                                alt="æ ‡ä¸ºæœªå®Œæˆ" class="icon-finish" draggable="false">
                                </div>
                            <!-- è¿˜åŸ -->
                            <div v-if="todo.removed" class="todo-btn btn-restore" @click="restoreTodo(todo)">
                                <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTkiIGhlaWdodD0iMTkiIHZpZXdCb3g9IjAgMCAxOSAxOSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTcuMzQ3OTggMi42NTc5MkM3LjcxMTM0IDEuOTEzNDQgNy40MDIzOCAxLjAxNTM1IDYuNjU3OSAwLjY1MTk4OEM1LjkxMzQxIDAuMjg4NjI3IDUuMDE1MzIgMC41OTc1OSA0LjY1MTk2IDEuMzQyMDhMNy4zNDc5OCAyLjY1NzkyWk0xLjUyNiA5LjA4MzMzTDAuMzc1NTcxIDguMTIwNzhDMC4wNzc5NTE2IDguNDc2NDkgLTAuMDM4MzgyIDguOTQ5ODcgMC4wNjA0NjEyIDkuNDAzMDFDMC4xNTkzMDQgOS44NTYxNSAwLjQ2MjIwNiAxMC4yMzgxIDAuODgwOTI0IDEwLjQzNzVMMS41MjYgOS4wODMzM1pNMTQuNTcyNCAxNi41ODkzQzE0LjM0NTYgMTcuMzg2IDE0LjgwNzYgMTguMjE1OCAxNS42MDQ0IDE4LjQ0MjZDMTYuNDAxMiAxOC42Njk0IDE3LjIzMSAxOC4yMDczIDE3LjQ1NzggMTcuNDEwNkwxNC41NzI0IDE2LjU4OTNaTTYuMjUxOTIgMTQuMzMyMUM2LjcxMTQ1IDE1LjAyMTMgNy42NDI3NiAxNS4yMDc2IDguMzMyMDUgMTQuNzQ4MUM5LjAyMTM0IDE0LjI4ODUgOS4yMDc2IDEzLjM1NzIgOC43NDgwOCAxMi42Njc5TDYuMjUxOTIgMTQuMzMyMVpNNC42NTE5NiAxLjM0MjA4QzMuNjc2NiAzLjM0MDQ3IDIuNjAwMzMgNS4wNDUyNSAxLjc2NjU4IDYuMjUxMDhDMS4zNTA1OSA2Ljg1MjcyIDAuOTk3MjYzIDcuMzI2ODUgMC43NTAzODQgNy42NDc2MkMwLjYyNzAwNSA3LjgwNzkzIDAuNTMwMzkyIDcuOTI5NyAwLjQ2NjA0NyA4LjAwOTY5QzAuNDMzODggOC4wNDk2NyAwLjQwOTc5NiA4LjA3OTIgMC4zOTQ0ODIgOC4wOTc4NkMwLjM4NjgyNiA4LjEwNzE4IDAuMzgxMzY0IDguMTEzNzkgMC4zNzgxODMgOC4xMTc2M0MwLjM3NjU5MiA4LjExOTU1IDAuMzc1NTcyIDguMTIwNzcgMC4zNzUxMzMgOC4xMjEzQzAuMzc0OTE0IDguMTIxNTcgMC4zNzQ4NCA4LjEyMTY1IDAuMzc0OTEyIDguMTIxNTdDMC4zNzQ5NDggOC4xMjE1MiAwLjM3NTAyMSA4LjEyMTQ0IDAuMzc1MTMxIDguMTIxM0MwLjM3NTE4NiA4LjEyMTI0IDAuMzc1Mjk2IDguMTIxMTEgMC4zNzUzMjMgOC4xMjEwN0MwLjM3NTQ0MiA4LjEyMDkzIDAuMzc1NTcxIDguMTIwNzggMS41MjYgOS4wODMzM0MyLjY3NjQzIDEwLjA0NTkgMi42NzY1OCAxMC4wNDU3IDIuNjc2NzMgMTAuMDQ1NUMyLjY3NjggMTAuMDQ1NCAyLjY3Njk2IDEwLjA0NTIgMi42NzcwOSAxMC4wNDUxQzIuNjc3MzUgMTAuMDQ0OCAyLjY3NzY1IDEwLjA0NDQgMi42Nzc5OCAxMC4wNDRDMi42Nzg2NSAxMC4wNDMyIDIuNjc5NDYgMTAuMDQyMyAyLjY4MDQyIDEwLjA0MTFDMi42ODIzNCAxMC4wMzg4IDIuNjg0ODYgMTAuMDM1OCAyLjY4Nzk0IDEwLjAzMkMyLjY5NDEyIDEwLjAyNDYgMi43MDI2MSAxMC4wMTQzIDIuNzEzMzMgMTAuMDAxM0MyLjczNDc1IDkuOTc1MTYgMi43NjUwOCA5LjkzNzk1IDIuODAzNjIgOS44OTAwNUMyLjg4MDY3IDkuNzk0MjYgMi45OTA2IDkuNjU1NjEgMy4xMjc3OCA5LjQ3NzM4QzMuNDAyMDEgOS4xMjEwNiAzLjc4NTg3IDguNjA1NjIgNC4yMzQxNyA3Ljk1NzI1QzUuMTI5IDYuNjYzMDggNi4yODk3MiA0LjgyNjIgNy4zNDc5OCAyLjY1NzkyTDQuNjUxOTYgMS4zNDIwOFpNMi4wNDcwNCAxMC40ODk5QzMuNzc2MTcgOS44NDk0MiA1LjczMzE5IDkuMTcyMzEgNy42MzggOC43MjEzN0M5LjU3MDA4IDguMjYzOTkgMTEuMzAyNSA4LjA3NjMxIDEyLjYyODggOC4zMDE3QzEzLjg3NTIgOC41MTM1MiAxNC42Mjg0IDkuMDUwMDggMTUuMDE2MyAxMC4wNDA1QzE1LjQ2MjggMTEuMTgwNyAxNS41MzgzIDEzLjE5NTYgMTQuNTcyNCAxNi41ODkzTDE3LjQ1NzggMTcuNDEwNkMxOC40ODQzIDEzLjgwNDIgMTguNjE2NiAxMS4wMDY3IDE3LjgwOTcgOC45NDY0NkMxNi45NDQyIDYuNzM2MzQgMTUuMTMzNyA1LjY4NDM3IDEzLjEzMTQgNS4zNDQxMUMxMS4yMDkyIDUuMDE3NDMgOS4wMDc5OSA1LjMxNDEzIDYuOTQ2OSA1LjgwMjA2QzQuODU4NTYgNi4yOTY0NCAyLjc2MjgzIDcuMDI1NTggMS4wMDQ5NiA3LjY3NjczTDIuMDQ3MDQgMTAuNDg5OVpNOC43NDgwOCAxMi42Njc5QzcuNTIzMTIgMTAuODMwNSA1LjIyOTM0IDkuMTg1OTMgMi4xNzEwOCA3LjcyOTEzTDAuODgwOTI0IDEwLjQzNzVDMy43NzA2NiAxMS44MTQxIDUuNDc2ODggMTMuMTY5NSA2LjI1MTkyIDE0LjMzMjFMOC43NDgwOCAxMi42Njc5WiIgZmlsbD0iIzMzMzIyRSIvPgo8L3N2Zz4K"
                                alt="è¿˜åŸ" draggable="false">
                                </div>
                            <!-- åˆ é™¤ -->
                            <div class="todo-btn btn-delete" v-else="todo.removed" @click="removeTodo(todo)">
                                <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAxOCAxOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNS4wOTkzIDE3Ljc1OTdDMTUuNzk0OSAxOC4yMDk4IDE2LjcyMzUgMTguMDEwOCAxNy4xNzM2IDE3LjMxNTJDMTcuNjIzNiAxNi42MTk3IDE3LjQyNDYgMTUuNjkxMSAxNi43MjkxIDE1LjI0MUMxMy4zMDc5IDEzLjAyNzMgMTAuODIwOSAxMC45OTU5IDguOTIyNTEgOS4wMzczOUM5LjA5NzQyIDguODQ5ODIgOS4yNzI5MSA4LjY2NTcxIDkuNDQ4ODggOC40ODUzNEMxMS44ODY0IDUuOTg2OTIgMTQuMjQ3MiA0LjM4MDY2IDE2LjI5NDQgMy45NzEyMkMxNy4xMDY3IDMuODA4NzUgMTcuNjMzNSAzLjAxODUyIDE3LjQ3MTEgMi4yMDYxOEMxNy4zMDg2IDEuMzkzODQgMTYuNTE4NCAwLjg2NzAxMyAxNS43MDYgMS4wMjk0OEMxMi43NTMyIDEuNjIwMDUgOS44NjQwNiAzLjc2Mzc5IDcuMzAxNTQgNi4zOTAzN0M3LjE4MTUxIDYuNTEzNCA3LjA2MTgxIDYuNjM3ODkgNi45NDI0OSA2Ljc2Mzc1QzUuNDIwMDEgNC44MDQzMyA0LjM3MDU4IDIuODc2MzIgMy40MjU5MSAwLjg2MzE2NEMzLjA3Mzk5IDAuMTEzMjAyIDIuMTgwNzMgLTAuMjA5NDc1IDEuNDMwNzcgMC4xNDI0NDVDMC42ODA4MDkgMC40OTQzNjUgMC4zNTgxMzIgMS4zODc2MiAwLjcxMDA1MSAyLjEzNzU4QzEuODIwODggNC41MDQ4MSAzLjA3ODk5IDYuNzY1MTEgNC45MjkzMiA5LjA1MzA2QzMuMjIyMDYgMTEuMTM0MSAxLjYyNjY5IDEzLjQzMjggMC4yMjI3MjMgMTUuNzE0MkMtMC4yMTE0NTMgMTYuNDE5NyAwLjAwODUyNzUyIDE3LjM0MzcgMC43MTQwNjQgMTcuNzc3OEMxLjQxOTYgMTguMjEyIDIuMzQzNTIgMTcuOTkyIDIuNzc3NyAxNy4yODY1QzQuMDQ4MTkgMTUuMjIyIDUuNDY0MDUgMTMuMTcyNiA2Ljk1NTU5IDExLjMxNjhDOC45ODUgMTMuMzc2NSAxMS41OTU5IDE1LjQ5MjggMTUuMDk5MyAxNy43NTk3WiIgZmlsbD0iIzMzMzIyRSIvPgo8L3N2Zz4K"
                                alt="åˆ é™¤" draggable="false">
                            </div>
                            <!-- ç¼–è¾‘ -->
                            <div class="edit-todo-wrapper" v-if="editedTodo !== null && editedTodo.id === todo.id">
                                <input type="text" class="edit-todo" value="ç¼–è¾‘ Todo..."
                                    v-if="editedTodo !== null && editedTodo.id === todo.id" v-model="todo.title"
                                    v-focus="true" @keyup.enter="editDone(todo)" @keyup.esc="cancelEdit(todo)" @dragstart.stop.prevent @mousedown.stop />
                                <div class="todo-btn btn-edit-submit"
                                    @click="editDone(todo)" >
                                    <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTkiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAxOSAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTE2LjUwODQgMTAuMzEwOUMxNy4yMzI0IDEwLjU4MjMgMTguMDM5NCAxMC4yMTU1IDE4LjMxMDkgOS40OTE1N0MxOC41ODIzIDguNzY3NiAxOC4yMTU1IDcuOTYwNjMgMTcuNDkxNiA3LjY4OTE0TDE2LjUwODQgMTAuMzEwOVpNOC45OTk5IDJMMTAuMTMyMSAxLjE3NjU1QzkuODU1OCAwLjc5NjYxOCA5LjQwNzM1IDAuNTgwNjA1IDguOTM4MDIgMC42MDEzNjhDOC40Njg3IDAuNjIyMTMgOC4wNDEwNyAwLjg3Njg5OSA3Ljc5OTM4IDEuMjc5NzRMOC45OTk5IDJaTTcuNjcxNzUgMTcuNTU3MkM3LjQyNzIyIDE4LjI5MDcgNy44MjM2MiAxOS4wODM2IDguNTU3MTMgMTkuMzI4MUM5LjI5MDY0IDE5LjU3MjcgMTAuMDgzNSAxOS4xNzYzIDEwLjMyOCAxOC40NDI4TDcuNjcxNzUgMTcuNTU3MlpNMS4wOTk2MyA3LjkyNzkzQzAuNTA3NTQxIDguNDI1MTkgMC40MzA2NjkgOS4zMDgyOCAwLjkyNzkzMSA5LjkwMDM3QzEuNDI1MTkgMTAuNDkyNSAyLjMwODI4IDEwLjU2OTMgMi45MDAzNyAxMC4wNzIxTDEuMDk5NjMgNy45Mjc5M1pNMTcuNDkxNiA3LjY4OTE0QzE1LjgwMjMgNy4wNTU2NSAxMy45ODQxIDUuNTAzNiAxMi41MDk5IDMuOTY3OTVDMTEuNzkzIDMuMjIxMjIgMTEuMTkzOSAyLjUxNzQgMTAuNzc0NCAyLjAwMDU2QzEwLjU2NTEgMS43NDI2OSAxMC40MDE3IDEuNTMyNzYgMTAuMjkxOSAxLjM4OTA4QzEwLjIzNyAxLjMxNzI3IDEwLjE5NTYgMS4yNjIxMSAxMC4xNjg2IDEuMjI1OUMxMC4xNTUxIDEuMjA3OCAxMC4xNDUzIDEuMTk0NDQgMTAuMTM5MSAxLjE4NjEyQzEwLjEzNjEgMS4xODE5NSAxMC4xMzQgMS4xNzkwNSAxMC4xMzI4IDEuMTc3NDRDMTAuMTMyMiAxLjE3NjY0IDEwLjEzMTggMS4xNzYxNiAxMC4xMzE3IDEuMTc2MDFDMTAuMTMxNyAxLjE3NTkzIDEwLjEzMTcgMS4xNzU5NCAxMC4xMzE3IDEuMTc2MDNDMTAuMTMxOCAxLjE3NjA3IDEwLjEzMTkgMS4xNzYyIDEwLjEzMTkgMS4xNzYyM0MxMC4xMzIgMS4xNzYzNyAxMC4xMzIxIDEuMTc2NTUgOC45OTk5IDJDNy44Njc2NyAyLjgyMzQ1IDcuODY3ODMgMi44MjM2NyA3Ljg2OCAyLjgyMzlDNy44NjgwOCAyLjgyNDAxIDcuODY4MjYgMi44MjQyNiA3Ljg2ODQyIDIuODI0NDdDNy44Njg3MiAyLjgyNDkgNy44NjkwOSAyLjgyNTQgNy44Njk1MyAyLjgyNTk5QzcuODcwMzkgMi44MjcxOCA3Ljg3MTUgMi44Mjg2OSA3Ljg3Mjg1IDIuODMwNTRDNy44NzU1NCAyLjgzNDIzIDcuODc5MjIgMi44MzkyNCA3Ljg4Mzg1IDIuODQ1NTNDNy44OTMxIDIuODU4MTEgNy45MDYxOSAyLjg3NTgyIDcuOTIyOTggMi44OTgzN0M3Ljk1NjU2IDIuOTQzNDUgOC4wMDQ5OSAzLjAwNzkyIDguMDY3MyAzLjA4OTQ0QzguMTkxODUgMy4yNTIzOSA4LjM3MjE3IDMuNDgzODcgOC42MDAzOCAzLjc2NTA2QzkuMDU1OTMgNC4zMjYzNSA5LjcwNjg1IDUuMDkxMjggMTAuNDkgNS45MDcwNUMxMi4wMTU4IDcuNDk2NCAxNC4xOTc3IDkuNDQ0MzUgMTYuNTA4NCAxMC4zMTA5TDE3LjQ5MTYgNy42ODkxNFpNNy42MTM5NyAyLjE5ODAxQzguMTA2NjkgNS42NDY2OSA4LjM0OTk3IDguODI5MjYgOC4zNDk5NyAxMS41QzguMzQ5OTcgMTQuMjAxNSA4LjEwMDE0IDE2LjI3MjIgNy42NzE3NSAxNy41NTcyTDEwLjMyOCAxOC40NDI4QzEwLjg5OTggMTYuNzI3OCAxMS4xNSAxNC4yOTg2IDExLjE1IDExLjVDMTEuMTUgOC42NzA3NiAxMC44OTMyIDUuMzUzMzEgMTAuMzg1OCAxLjgwMTk5TDcuNjEzOTcgMi4xOTgwMVpNMi45MDAzNyAxMC4wNzIxQzMuODgyMjggOS4yNDc0MiA1LjI5NjM2IDguMDkwMzMgNi42NDM3OSA2LjgzMDFDNy45NzY2NCA1LjU4MzUyIDkuMzQ1ODcgNC4xNDQ1OCAxMC4yMDA0IDIuNzIwMjZMNy43OTkzOCAxLjI3OTc0QzcuMTU0MDIgMi4zNTU0MiA2LjAyMzMxIDMuNTc2NjMgNC43MzExOCA0Ljc4NTEzQzMuNDUzNjQgNS45Nzk5OCAyLjExNzcyIDcuMDcyODkgMS4wOTk2MyA3LjkyNzkzTDIuOTAwMzcgMTAuMDcyMVoiIGZpbGw9IiMzMzMyMkUiLz4KPC9zdmc+Cg==" alt="æäº¤" draggable="false">
                                    </div>
                                </div>
                            </li>
                        </transition-group>
                        <div class="bar-message bar-bottom">
                            <div class="bar-message-text">
                            <span v-if="leftTodosCount">å‰©ä½™ {{leftTodosCount}} é¡¹æœªå®Œæˆ</span>
                            <span v-else-if="completedTodosCount">å®Œç¾æ”¶å·¥ï¼</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- å¿«é€ŸæŒ‡å—å¼¹çª— -->
                    <div class="custom-alert-overlay quick-guide-overlay" v-if="isQuickGuideVisible" style="z-index:10000; display:flex; justify-content:center; align-items:center; position:fixed; top:0; left:0; width:100%; height:100%; background-color:rgba(0,0,0,0.5); animation:fadeIn 0.2s ease;" @click.self="hideQuickGuide">
                        <div class="custom-alert quick-guide-dialog" style="max-width:280px; width:90%; margin:12px; padding:16px; background-color:var(--bg-normal); border:var(--border); border-radius:var(--border-radius); box-shadow:var(--box-shadow); position:relative; max-height:90vh; overflow-y:auto; animation:popIn 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);">
                            <div class="custom-alert-title quick-guide-title" style="text-align:center; font-size:18px; margin-bottom:12px; font-weight:bold; color:var(--font-color);">
                                <span style="display:inline-block; margin-right:6px;">ğŸ’¡</span>å¿«é€ŸæŒ‡å—
                            </div>
                            <div class="custom-alert-content" style="padding:0 8px;">
                                <ul style="list-style:none; padding:0; margin:0; text-align:center;">
                                    <li style="display:inline-flex; justify-content:center; align-items:center; margin-bottom:8px; color:var(--font-color); width:100%;">
                                        <span style="margin-right:6px; font-size:14px;">ğŸ“</span>
                                        <span style="font-size:14px;">å•å‡»æ ‡é¢˜åˆ›å»ºä»»åŠ¡</span>
                                    </li>
                                    <li style="display:inline-flex; justify-content:center; align-items:center; margin-bottom:8px; color:var(--font-color); width:100%;">
                                        <span style="margin-right:6px; font-size:14px;">âœï¸</span>
                                        <span style="font-size:14px;">åŒå‡»ä¿®æ”¹å†…å®¹</span>
                                    </li>
                                    <li style="display:inline-flex; justify-content:center; align-items:center; margin-bottom:8px; color:var(--font-color); width:100%;">
                                        <span style="margin-right:6px; font-size:14px;">â†•ï¸</span>
                                        <span style="font-size:14px;">æ‹–æ‹½æ’åº</span>
                                    </li>
                                    <li style="display:inline-flex; justify-content:center; align-items:center; margin-bottom:8px; color:var(--font-color); width:100%;">
                                        <span style="margin-right:6px; font-size:14px;">ğŸ‘‰</span>
                                        <span style="font-size:14px;">æŸ¥çœ‹ä¾§è¾¹æ </span>
                                    </li>
                                    <li style="display:inline-flex; justify-content:center; align-items:center; margin-bottom:8px; color:var(--font-color); width:100%;">
                                        <span style="margin-right:6px; font-size:14px;">ğŸ’¾</span>
                                        <span style="font-size:14px;">å¯¼å…¥é¢„è®¾</span>
                                    </li>
                                    <li style="display:inline-flex; justify-content:center; align-items:center; margin-bottom:0; color:var(--font-color); width:100%;">
                                        <span style="margin-right:6px; font-size:14px;">ğŸ“</span>
                                        <span style="font-size:14px;">æŸ¥çœ‹é¢„è®¾å’Œæ–‡ä»¶å¤¹</span>
                                    </li>
                                </ul>
                            </div>
                            <div style="text-align:center; margin-top:12px;">
                                <button @click="hideQuickGuide" style="background:none; border:none; color:var(--font-color); cursor:pointer; padding:6px 12px; font-size:13px; opacity:0.8; transition:opacity 0.2s;">æˆ‘çŸ¥é“äº†</button>
                            </div>
                        </div>
                    </div>

                <div class="footer side-bar" 
                     @mouseenter="onSidebarMouseEnter"
                     @mouseleave="onSidebarMouseLeave"
                     :class="{ 'sidebar-enter-active': sidebarEntering, 'sidebar-exit-active': sidebarExiting }">
                        <div class="side-shortcut" @click="shortCutAction()" :class="{fold: isShow}">
                            <div class="shortcut-switch">
                                <span class="shortcut-title">{{shortCut}}</span>
                           <span class="shortcut-name">å¿«æ·æ“ä½œ </span>
                            </div>

                        </div>
                        <div class="todo-footer-box">
                            <ul class="todo-func-list filter">
                            <!-- <li v-if="todos.length || recycleBin.length">ç­›é€‰ï¼š</li> -->
                            <!-- <li v-if="hasRemovedTodo" ><input type="button" value="æ’¤é”€" v-if="hasRemovedTodo" @click="restoreTodo()"></li> -->
                            <li > <input class="btn-small action-showAll"
                                    type="button" value="å…¨éƒ¨" :class="{selected: intention === 'all'}"
                                        @click="intention ='all'" title="æ˜¾ç¤ºå…¨éƒ¨å¾…åŠäº‹é¡¹"></li>
                            <li v-if="completedTodosCount"><input class="btn-small action-progress" type="button"
                                    value="è¿›è¡Œä¸­" v-if="leftTodosCount" :class="{selected: intention === 'ongoing'}"
                                    @click="intention ='ongoing'" title="æ˜¾ç¤ºè¿›è¡Œä¸­çš„å¾…åŠäº‹é¡¹"></li>
                                <li v-if="completedTodosCount">
                                <input class="btn-small action-completed" type="button" value="å·²å®Œæˆ"
                                    v-if="completedTodosCount" :class="{selected: intention === 'completed'}"
                                        @click="intention='completed'" title="æ˜¾ç¤ºå·²å®Œæˆçš„å¾…åŠäº‹é¡¹">
                                </li>
                                <li v-if="recycleBin.length">
                                <input class="btn-small action-deleted" type="button" v-if="recycleBin.length"
                                    :class="{selected: intention === 'removed'}" value="å›æ”¶ç«™" @click="intention='removed'" title="æŸ¥çœ‹å·²åˆ é™¤çš„å¾…åŠäº‹é¡¹" />
                                </li>
                            </ul>
                            <ul class="todo-func-list batch">
                            <!-- <li v-if="todos.length">æ‰¹é‡æ“ä½œï¼š</li> -->
                            <li v-if="leftTodosCount"> <input type="button" class="btn-small completed-all"
                                    v-if="leftTodosCount" value="å…¨éƒ¨æ ‡ä¸ºå·²å®Œæˆ" @click="markAllAsCompleted" title="å°†æ‰€æœ‰æœªå®Œæˆçš„å¾…åŠäº‹é¡¹æ ‡è®°ä¸ºå·²å®Œæˆ"> </li>
                            <li v-if="completedTodosCount"> <input type="button" value="æ¸…é™¤å·²å®Œæˆ"
                                    class="btn-small completed-clear" v-if="completedTodosCount" @click="clearCompleted" title="æ¸…é™¤æ‰€æœ‰å·²å®Œæˆçš„å¾…åŠäº‹é¡¹ï¼ˆç§»è‡³å›æ”¶ç«™ï¼‰">
                                </li>
                            <li v-if="todos.length"><input type="button" class="btn-small clear-all" value="æ¸…é™¤å…¨éƒ¨"
                                    @click="clearAll" title="æ¸…é™¤æ‰€æœ‰å¾…åŠäº‹é¡¹ï¼ˆç§»è‡³å›æ”¶ç«™ï¼‰"> </li>
                            </ul>
                            <ul class="todo-func-list datasave">
                                <li> <!-- ä¿®æ”¹ï¼šç°åœ¨æ˜¯ä¸“ç”¨çš„"å¯¼å…¥é¢„è®¾"æŒ‰é’® -->
                                    <input type="button" 
                                           value="å¯¼å…¥é¢„è®¾" 
                                           class="btn-small action-import-preset btn-data-action" 
                                           @click="triggerImport" 
                                           title="ç‚¹å‡»å¯¼å…¥æ›¿æ¢.listæ–‡ä»¶" />
                                </li>
                                <li> <!-- "ä¿å­˜åˆ°æœ¬åœ°"æŒ‰é’® -->
                                    <input type="button" 
                                           :value="saveLocalButtonComputedText" 
                                           class="btn-small action-save-local btn-data-action" 
                                           id="saveLocal" 
                                           @click="handleSaveClick" 
                                           @mouseenter="isMouseOverSaveButton = true" 
                                           @mouseleave="isMouseOverSaveButton = false" 
                                           title="ä¿å­˜å½“å‰å¾…åŠäº‹é¡¹åˆ—è¡¨åˆ°æœ¬åœ°æ–‡ä»¶ (Alt+ç‚¹å‡» æ‰“å¼€æ–‡ä»¶å¤¹)" />
                                </li>
                                <li> <!-- æ–°å¢ï¼šå¿«é€Ÿå¼€å§‹æŒ‰é’® -->
                                    <input type="button" 
                                           value="å¿«é€Ÿå¼€å§‹" 
                                           class="btn-small action-quick-guide btn-data-action" 
                                           @click="showQuickGuide" 
                                           title="æŸ¥çœ‹å¿«é€Ÿä½¿ç”¨æŒ‡å—" />
                                </li>
                            </ul>

                        <!-- æ–°å¢AEåŠŸèƒ½åŒº -->
                        <ul class="todo-func-list ae-functions" v-if="typeof csInterface !== 'undefined' && csInterface">
                            <li>
                                <input type="button" value="åˆ›å»ºAEå›¾å±‚" class="btn-small action-create-layers" @click="createTodoLayers" title="æ ¹æ®å½“å‰å¾…åŠäº‹é¡¹åˆ—è¡¨åœ¨ After Effects ä¸­åˆ›å»ºå›¾å±‚" />
                            </li>
                        </ul>
                        </div>

                    </div>
                </div>

             <!-- è‡ªå®šä¹‰ä¸ªäººçš„ä¿¡æ¯ -->
            <div class="nav" draggable="false" style="position:absolute;">
                <div class="about">
                    <div class="info">
                        <div class="info-ico" @click="togglePop" :style="{ fontWeight: popShow ? 'normal' : 'bold' }">
                            å…³äºæˆ‘
                        </div>
                        <div class="popup animated popIn" v-if="!popShow" style="padding: 15px; box-sizing: border-box;">
                            <!-- ä½œè€…ä¿¡æ¯åŒºåŸŸ -->
                            <div style="display: flex; align-items: center; margin-bottom: 12px;">
                                <img src="public/img/author.gif" alt="" style="width: 80px; height: auto;">
                                <span style="font-size: 18px; margin-left: 15px;">çƒŸå›±é¸­</span>
                            </div>
                            
                            <!-- æè¿°æ–‡å­— -->
                            <div style="margin-bottom: 12px; color: #666; font-size: 14px; line-height: 1.4;">
                                ç®€ç®€å•å•å–œæ¬¢æ¢ç´¢è®¾è®¡å’Œå¼€å‘çš„åŠ¨æ•ˆè®¾è®¡å¸ˆ.
                            </div>
                            
                            <!-- ç¤¾äº¤åª’ä½“å›¾æ ‡ -->
                            <div style="display: flex; margin-bottom: 12px; justify-content: space-between;">
                                <a href="javascript:void(0);" class="social-link" @click="openExternalLink('https://github.com/yancongya')">
                                    <img src="public/img/social/github.svg" class="ic-social" alt="" title="GitHub">
                                </a>
                                <a href="javascript:void(0);" class="social-link" @click="openExternalLink('https://www.xiaohongshu.com/user/profile/5c009931f7e8b962bb328c6d')">
                                    <img src="public/img/social/xiaohongshu.svg" class="ic-social" alt="" title="å°çº¢ä¹¦">
                                </a>
                                <a href="javascript:void(0);" class="social-link" @click="openExternalLink('https://space.bilibili.com/100881808?spm_id_from=333.1387.0.0')">
                                    <img src="public/img/social/bilibili.svg" class="ic-social" alt="" title="å“”å“©å“”å“©">
                                </a>
                                <a href="javascript:void(0);" class="social-link" @click="openExternalLink('https://afdian.tv/a/tycon')">
                                    <img src="public/img/social/aifadian.svg" class="ic-social" alt="" title="çˆ±å‘ç”µ">
                                </a>
                                <a href="javascript:void(0);" class="social-link" @click="copyEmail">
                                    <img src="public/img/social/mail.svg" class="ic-social" alt="" title="ç‚¹å‡»å¤åˆ¶é‚®ç®±">
                                </a>
                            </div>
                            
                            <!-- é¡¹ç›®é“¾æ¥ -->
                            <a href="javascript:void(0);" class="inspiration" style="display: block; margin-bottom: 12px; text-decoration: none; color: #ff5858;" @click="openExternalLink('https://github.com/yancongya/uiineed-todo-list-extention')">
                                ğŸ”–å¼€æºé¡¹ç›®â†—
                            </a>
                            
                            <!-- å¾®ä¿¡è”ç³»ä¿¡æ¯ -->
                            <div class="zanshan" style="text-align: center; margin-top: 5px;">
                                <p style="margin-bottom: 5px;">æœ‰é—®é¢˜å¯ä»¥æ·»åŠ å¾®ä¿¡â˜•</p>
                                <img src="public/img/wechat_qrcode.jpg" alt="" class="zanshan-qr" style="width: 150px; height: auto; cursor: pointer;" title="ç‚¹å‡»å¤åˆ¶å¾®ä¿¡å·" @click="copyWechat">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

                                </div>
                            </div>

        <script>
            // CEP Extension Initialization
        var csInterface = null;
        try {
            csInterface = new CSInterface();
            // å°è¯•åŠ è½½JSXæ–‡ä»¶
            csInterface.evalScript('$.evalFile(Folder.decode(Folder.appPackage.fullName) + "/jsx/index.jsx")');
        } catch(e) {
            console.log("CSInterfaceä¸å¯ç”¨: ", e);
        }
        
        // å…¨å±€åŠ©æ‰‹å‡½æ•° - ç¡®ä¿åœ¨AEç¯å¢ƒä¸­æ‰“å¼€é“¾æ¥
        function openURLInAE(url) {
            if (typeof csInterface !== 'undefined' && csInterface) {
                try {
                    // ä½¿ç”¨CEPçš„å†…ç½®æ–¹æ³•æ‰“å¼€URLï¼Œæ›´åŠ å®‰å…¨å’Œç¨³å®š
                    csInterface.openURLInDefaultBrowser(url);
                } catch(e) {
                    console.error("ä½¿ç”¨CEPæ‰“å¼€URLå¤±è´¥:", e);
                    try {
                        // å¤‡é€‰æ–¹æ³•
                        window.cep.util.openURLInDefaultBrowser(url);
                    } catch(e2) {
                        console.error("ä½¿ç”¨CEPå¤‡é€‰æ–¹æ³•æ‰“å¼€URLå¤±è´¥:", e2);
                        // æœ€åçš„å¤‡é€‰æ–¹æ¡ˆ
                        window.open(url, '_blank');
                    }
                }
            } else {
                window.open(url, '_blank');
            }
        }
        
        // localStorage å­˜å‚¨æ•°æ®
            var STORAGE_KEY = 'uiineed-todos';
            var todoStorage = {
            fetch: function () {
                // ç›´æ¥ä½¿ç”¨æœ¬åœ°å­˜å‚¨ï¼Œä¸åœ¨åˆå§‹åŒ–æ—¶åŠ è½½æ–‡ä»¶æ•°æ®
                // è¿™æ ·å¯ä»¥é¿å…åˆå§‹åŒ–æ—¶çš„é˜»å¡æ“ä½œ
                var todos = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
                todos.forEach(function (todo, index) {
                    todo.id = index;
                });
                todoStorage.uid = todos.length;
                return todos;
            },
            // æ–°å¢æ–¹æ³•ï¼šå¼‚æ­¥ä»æ–‡ä»¶åŠ è½½æ•°æ®
            loadFromFile: function(callback) {
                if (typeof csInterface !== 'undefined' && csInterface) {
                    try {
                        csInterface.evalScript('$.todo.loadTodos()', function(result) {
                            try {
                                var response = JSON.parse(result);
                                if (response.success && response.data) {
                                    localStorage.setItem(STORAGE_KEY, JSON.stringify(response.data));
                                    if (typeof callback === 'function') {
                                        callback(response.data);
                                    }
                                }
                            } catch(e) {
                                console.error("è§£ææ•°æ®å¤±è´¥:", e);
                                if (typeof callback === 'function') {
                                    callback(null, e);
                                }
                            }
                        });
                    } catch(e) {
                        console.error("ä»AEåŠ è½½å¤±è´¥:", e);
                        if (typeof callback === 'function') {
                            callback(null, e);
                        }
                    }
                } else if (typeof callback === 'function') {
                    callback(null, new Error("CSInterface ä¸å¯ç”¨"));
                }
            },
            save: function (todos) {
                localStorage.setItem(STORAGE_KEY, JSON.stringify(todos));
            }
            }
        </script>
        <script>
        // ç§»é™¤è¯­è¨€åˆ‡æ¢ç›¸å…³å†…å®¹
    </script>
    <script>
            var app = new Vue({
                el: '#todo-app',
            data: function () {
                    // ç¡®ä¿æ‰€æœ‰å˜é‡éƒ½æœ‰åˆå§‹å€¼
                    return {
                        todos: todoStorage.fetch(),
                        newTodoTitle: '',
                        editedTodo: null,
                        intention: 'all', //é»˜è®¤ä¸º all
                        checkEmpty: false,
                        recycleBin: [],
                        dragIndex: '',
                        enterIndex: '',
                        show: true,
                        delayTime: '1',
                        isShow: false,
                        shortCut:'å¼€âœ¨',
                        popShow:true,
                        windowWidth: document.documentElement.clientWidth,
                        slogan: this.getSafeSlogan(localStorage.getItem('uiineed-slogan')) || "ä»Šæ—¥äº‹ä»Šæ—¥æ¯•ï¼Œå‹¿å°†ä»Šäº‹å¾…æ˜æ—¥!.â˜•",
                        isEditing: false,
                        originalSlogan: "",
                        isAltPressed: false, 
                        isMouseOverSaveButton: false,
                        sidebarTimer: null,
                        sidebarEntering: false,
                        sidebarExiting: false,
                        isMouseOverSidebar: false,
                        // è®¾ç½®ä¸ºfalseï¼Œé¿å…é¡µé¢åŠ è½½æ—¶å¼¹å‡º
                        isQuickGuideVisible: false
                    }
                },
            // ç›‘æµ‹ todos åˆ—è¡¨çš„å˜åŒ–ï¼Œå°†å˜åŒ–å­˜å‚¨åˆ° local storage
                watch: {
                windowWidth (val) {
                        let that = this;
                    console.log("å®æ—¶å±å¹•å®½åº¦ï¼š",val);
                    },
                    todos: {
                    handler: function (todos) {
                        todoStorage.save(todos)
                        },
                        deep: true
                    }
                },
                mounted() {
                    this.show = true;
                    var that = this;
                    this.contorlScreen();
                    
                    // æŒ‚è½½å®Œæˆåï¼Œå¼‚æ­¥åŠ è½½æ–‡ä»¶æ•°æ®ï¼ˆä¸é˜»å¡UIï¼‰
                    setTimeout(() => {
                        todoStorage.loadFromFile((data, error) => {
                            if (data) {
                                that.todos = data;
                            }
                        });
                        
                        // å¼‚æ­¥åŠ è½½æ ‡è¯­ï¼ˆä¸é˜»å¡UIï¼‰
                        this.loadSloganAsync();
                    }, 500);
                   
                   // <!--æŠŠwindow.onresizeäº‹ä»¶æŒ‚åœ¨åˆ°mountedå‡½æ•°ä¸Š-->
                    window.onresize = () => {
                        return (() => {
                            window.fullWidth = document.documentElement.clientWidth;
                    that.windowWidth = window.fullWidth; // å®½
                        })()
                    };
                    // æ–°å¢ï¼šAlté”®äº‹ä»¶ç›‘å¬
                    window.addEventListener('keydown', this.handleGlobalKeyDown);
                    window.addEventListener('keyup', this.handleGlobalKeyUp);
                    
                    // æ·»åŠ ç‚¹å‡»ç©ºç™½å¤„å…³é—­ä¾§è¾¹æ çš„äº‹ä»¶ç›‘å¬
                    document.addEventListener('click', this.handleDocumentClick);
                    
                    // æ·»åŠ Escé”®å…³é—­å¿«é€ŸæŒ‡å—çš„äº‹ä»¶ç›‘å¬
                    document.addEventListener('keydown', (e) => {
                        if (e.key === 'Escape' && this.isQuickGuideVisible) {
                            this.hideQuickGuide();
                        }
                    });
                },
                methods: {
                    // æ–°å¢ï¼šç¡®ä¿sloganæ–‡æœ¬å®‰å…¨(è§£ç URLç¼–ç çš„æ–‡æœ¬)
                    getSafeSlogan: function(text) {
                        if (!text) return null;
                        
                        // æ£€æŸ¥æ˜¯å¦æ˜¯URLç¼–ç çš„æ–‡æœ¬
                        try {
                            // å¦‚æœåŒ…å«%å¼€å¤´çš„ç¼–ç å­—ç¬¦ï¼Œå°è¯•è§£ç 
                            if (text.indexOf('%') !== -1) {
                                return decodeURIComponent(text);
                            }
                        } catch (e) {
                            console.error("è§£ç sloganå¤±è´¥:", e);
                        }
                        
                        return text;
                    },
                    // æ–°å¢ï¼šå¼‚æ­¥åŠ è½½æ ‡è¯­
                    loadSloganAsync: function() {
                        if (typeof csInterface !== 'undefined' && csInterface) {
                            try {
                                csInterface.evalScript('$.todo.getSlogan()', (result) => {
                                    try {
                                        var response = JSON.parse(result);
                                        if (response.success && response.slogan) {
                                            // è§£ç åå†ä¿å­˜åˆ°localStorageå’ŒVueå˜é‡
                                            var decodedSlogan = this.getSafeSlogan(response.slogan);
                                            localStorage.setItem('uiineed-slogan', decodedSlogan);
                                            this.slogan = decodedSlogan;
                                        }
                                    } catch(e) {
                                        console.error("è·å–æ ‡è¯­å¤±è´¥:", e);
                                    }
                                });
                            } catch(e) {
                                console.error("è°ƒç”¨ExtendScriptè·å–æ ‡è¯­å¤±è´¥:", e);
                            }
                        }
                    },
                    showQuickGuide() {
                        console.log("æ˜¾ç¤ºå¿«é€ŸæŒ‡å—æ–¹æ³•è¢«è°ƒç”¨");
                        // é¦–å…ˆç¡®ä¿å®ƒæ˜¯å…³é—­çš„
                        this.isQuickGuideVisible = false;
                        // ç„¶ååœ¨çŸ­æš‚å»¶è¿Ÿåæ‰“å¼€
                        setTimeout(() => {
                            this.isQuickGuideVisible = true;
                            console.log("å·²è®¾ç½®isQuickGuideVisibleä¸ºtrue");
                        }, 100);
                    },
                    hideQuickGuide() {
                        console.log("å…³é—­å¿«é€ŸæŒ‡å—æ–¹æ³•è¢«è°ƒç”¨");
                        
                        // æ·»åŠ é€€å‡ºåŠ¨ç”»
                        const overlay = document.querySelector('.custom-alert-overlay');
                        const alertBox = document.querySelector('.custom-alert');
                        
                        if (overlay && alertBox) {
                            alertBox.style.animation = 'popOut 0.3s forwards';
                            overlay.style.animation = 'fadeOut 0.3s forwards';
                            
                            // åŠ¨ç”»å®Œæˆåå†éšè—
                            setTimeout(() => {
                                this.isQuickGuideVisible = false;
                                console.log("å·²è®¾ç½®isQuickGuideVisibleä¸ºfalse");
                            }, 300);
                        } else {
                            // å¦‚æœæ‰¾ä¸åˆ°å…ƒç´ ï¼Œåˆ™ç›´æ¥éšè—
                            this.isQuickGuideVisible = false;
                            console.log("å·²è®¾ç½®isQuickGuideVisibleä¸ºfalse");
                        }
                    },
                    editText() {
                        this.originalSlogan = this.slogan;
                        this.isEditing = true;
                        this.$nextTick(() => {
                            this.$refs.sloganInput.focus();
                        });
                    },
                    saveText() {
                        this.isEditing = false;
                        // å­˜å‚¨åŸå§‹æ–‡æœ¬ï¼Œæ— éœ€ç¼–ç 
                        localStorage.setItem('uiineed-slogan', this.slogan);
                        
                        // åŒæ—¶ä¿å­˜åˆ°é¢„è®¾æ–‡ä»¶ï¼Œä¼ é€’æ—¶éœ€è¦ç¼–ç 
                        if (typeof csInterface !== 'undefined' && csInterface) {
                            try {
                                csInterface.evalScript('$.todo.saveSlogan("' + encodeURIComponent(this.slogan) + '")', function(result) {
                                    console.log("[ExtendScript $.todo.saveSlogan RAW RESULT]:", result);
                                    // å³ä½¿å¤±è´¥ä¹Ÿä¸æ˜¾ç¤ºé”™è¯¯ï¼Œç”¨æˆ·ä½“éªŒæ›´å¥½
                                });
                            } catch(e) {
                                console.error("ä¿å­˜æ ‡è¯­åˆ°é¢„è®¾æ–‡ä»¶å¤±è´¥:", e);
                            }
                        }
                    },
                    cancelText() {
                        this.slogan = this.originalSlogan;
                        this.isEditing = false;
                    },
                contorlScreen:function(){
                    if(this.windowWidth < 768){
                            this.isShow = !this.isShow;
                        return this.shortCut = 'Filter'
                        }
                    },
                togglePop: function(){
                    this.popShow = !this.popShow;//å–å
                    },
                shortCutAction: function(){
                        // é‡ç½®åŠ¨ç”»çŠ¶æ€
                        this.sidebarEntering = false;
                        this.sidebarExiting = false;
                        
                        if(!this.isShow) {
                            // æ‰“å¼€ä¾§è¾¹æ æ—¶æ·»åŠ è¿›åœºåŠ¨ç”»
                            this.sidebarEntering = true;
                            setTimeout(() => {
                                this.sidebarEntering = false;
                            }, 300);
                        } else {
                            // å…³é—­ä¾§è¾¹æ æ—¶æ·»åŠ é€€åœºåŠ¨ç”»
                            this.sidebarExiting = true;
                            setTimeout(() => {
                        this.isShow = !this.isShow;
                                this.sidebarExiting = false;
                                this.shortCut = this.isShow ? 'å…³' : 'å¼€âœ¨';
                            }, 300);
                            return;
                        }
                        
                        this.isShow = !this.isShow;
                        this.shortCut = this.isShow ? 'å…³' : 'å¼€âœ¨';
                    },
                onSidebarMouseEnter: function() {
                    this.isMouseOverSidebar = true;
                    // æ¸…é™¤è‡ªåŠ¨å…³é—­çš„å®šæ—¶å™¨
                    if (this.sidebarTimer) {
                        clearTimeout(this.sidebarTimer);
                        this.sidebarTimer = null;
                    }
                    
                    // ç§»é™¤é¼ æ ‡æ‚¬æµ®æ—¶è‡ªåŠ¨æ‰“å¼€ä¾§è¾¹æ çš„åŠŸèƒ½
                    // åªæœ‰å½“ä¾§è¾¹æ å·²ç»æ‰“å¼€æ—¶æ‰å“åº”é¼ æ ‡æ‚¬æµ®
                },
                onSidebarMouseLeave: function() {
                    this.isMouseOverSidebar = false;
                    // è®¾ç½®å®šæ—¶å™¨ï¼Œ0.5ç§’åå…³é—­ä¾§è¾¹æ ï¼ˆä»…å½“ä¾§è¾¹æ å·²ç»æ˜¯æ‰“å¼€çŠ¶æ€æ—¶ï¼‰
                    this.sidebarTimer = setTimeout(() => {
                        if (!this.isShow && !this.isMouseOverSidebar) {
                            // é‡ç½®åŠ¨ç”»çŠ¶æ€
                            this.sidebarEntering = false;
                            this.sidebarExiting = true;
                            
                            setTimeout(() => {
                                this.isShow = true;
                                this.sidebarExiting = false;
                                this.shortCut = 'å…³';
                            }, 300);
                        }
                    }, 500);
                },
                copyEmail: function() {
                    const email = "2655283737@qq.com";
                    navigator.clipboard.writeText(email).then(() => {
                        alert("é‚®ç®±åœ°å€å·²å¤åˆ¶: " + email);
                    }).catch(err => {
                        console.error('æ— æ³•å¤åˆ¶æ–‡æœ¬: ', err);
                        // åå¤‡æ–¹æ¡ˆ
                        const textarea = document.createElement('textarea');
                        textarea.value = email;
                        textarea.style.position = 'fixed';
                        textarea.style.opacity = 0;
                        document.body.appendChild(textarea);
                        textarea.select();
                        document.execCommand('copy');
                        document.body.removeChild(textarea);
                        alert("é‚®ç®±åœ°å€å·²å¤åˆ¶: " + email);
                    });
                },
                copyWechat: function() {
                    const wechatId = "Tycon3";
                    navigator.clipboard.writeText(wechatId).then(() => {
                        alert("å¾®ä¿¡å·å·²å¤åˆ¶: " + wechatId);
                    }).catch(err => {
                        console.error('æ— æ³•å¤åˆ¶æ–‡æœ¬: ', err);
                        // åå¤‡æ–¹æ¡ˆ
                        const textarea = document.createElement('textarea');
                        textarea.value = wechatId;
                        textarea.style.position = 'fixed';
                        textarea.style.opacity = 0;
                        document.body.appendChild(textarea);
                        textarea.select();
                        document.execCommand('copy');
                        document.body.removeChild(textarea);
                        alert("å¾®ä¿¡å·å·²å¤åˆ¶: " + wechatId);
                    });
                },
                openExternalLink: function(url) {
                    // ä½¿ç”¨å…¨å±€åŠ©æ‰‹å‡½æ•°æ‰“å¼€URL
                    openURLInAE(url);
                },
                shuffle: function () {
                    this.filteredTodos = _.shuffle(this.filteredTodos);
                },
                addTodo: function (e) {
                        if (this.newTodoTitle === '') {
                            this.checkEmpty = true;
                        return
                    }else{
                        }
                    var newTodo = {
                            id: todoStorage.uid++,
                            title: this.newTodoTitle,
                            completed: false,
                        removed: false,
                    };
                    this.todos.unshift(newTodo);
                        this.newTodoTitle = '';
                        this.checkEmpty = false;
                        this.delayTime = '0';
                        
                    // å…³é—­è¾“å…¥æ¡† - æ·»åŠ åŠ¨ç”»æ•ˆæœ
                    var addContentWrapper = document.querySelector('.add-content-wrapper');
                    if (addContentWrapper) {
                        addContentWrapper.classList.add('hiding');
                        setTimeout(function() {
                            addContentWrapper.classList.remove('show-input');
                            setTimeout(function() {
                                addContentWrapper.classList.remove('hiding');
                            }, 300);
                        }, 200);
                    }

                    // ç§»é™¤è‡ªåŠ¨åˆ›å»ºAEå›¾å±‚çš„åŠŸèƒ½
                    // ä»…ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨ï¼Œä¸è‡ªåŠ¨åˆ›å»ºAEå›¾å±‚
                    },
                markAsCompleted: function (todo) {
                        todo.completed = true;
                    // ç§»é™¤è‡ªåŠ¨æ›´æ–°AEå›¾å±‚çš„åŠŸèƒ½
                    // ä»…æ›´æ–°æœ¬åœ°æ•°æ®
                    },
                markAsUncompleted: function (todo) {
                        todo.completed = false;
                    // ç§»é™¤è‡ªåŠ¨æ›´æ–°AEå›¾å±‚çš„åŠŸèƒ½
                    // ä»…æ›´æ–°æœ¬åœ°æ•°æ®
                },
                markAllAsCompleted: function () {
                    confirm('ç¡®è®¤ä¸€é”®å‹¾é€‰å®Œæˆå…¨éƒ¨å¾…åŠäº‹é¡¹ï¼Ÿ').then((confirmed) => {
                        if (confirmed) {
                            this.todos.map(function (todo) {
                                if (!todo.completed) todo.completed = true;
                            })
                            }
                        });
                    },
                removeTodo: function (todo) {
                        let removedTodo = this.todos.splice(this.todos.indexOf(todo), 1)[0];
                        removedTodo.removed = true;
                        this.recycleBin.unshift(removedTodo);
                    let pos = this.todos.indexOf(todo);
                    },
                restoreTodo: function (todo) {
                        todo.removed = false;
                        this.todos.unshift(todo);
                        let pos = this.recycleBin.indexOf(todo);
                        this.recycleBin.splice(pos, 1);
                    },
                editdTodo: function (todo) {
                        this.editedTodo = {
                            id: todo.id,
                            title: todo.title
                        }

                    },
                    lineFeed: function(event) {
                    if (event.keyCode == 13 && event.ctrlKey ){
                            this.newTodoTitle = this.newTodoTitle + '\n';
                        } else {
                            //event.preventDefault();
                            if (this.newTodoTitle === '') {
                                this.checkEmpty = true;
                                    return
                                }else{
                            }
                            // æ·»åŠ æ–°å¾…åŠäº‹é¡¹ï¼Œä½†ä¸åˆ›å»ºAEå›¾å±‚
                            this.todos.unshift({
                                id: todoStorage.uid++,
                                title: this.newTodoTitle,
                                completed: false,
                                removed: false,
                            });
                            this.newTodoTitle = '';
                            this.checkEmpty = false;
                            this.delayTime = '0';
                            // ä¸è°ƒç”¨AEåˆ›å»ºå›¾å±‚åŠŸèƒ½
                        }
                    // this.newTodoTitle = this.newTodoTitle + '\n';
                    },
                editDone: function (todo) {
                        if (todo.title === '') {
                        this.removeTodo(todo)
                        }
                        this.editedTodo = null;
                    },
                cancelEdit: function (todo) {
                        todo.title = this.editedTodo.title;
                    this.editedTodo = null
                },
                clearCompleted: function () {
                    confirm('ç¡®è®¤æ¸…é™¤å…¨éƒ¨å·²å®Œæˆçš„ä»£åŠäº‹é¡¹?').then((confirmed) => {
                        if (confirmed) {
                        this.completedTodos.map(todo => todo.removed = true);
                        this.recycleBin.unshift(...this.completedTodos);
                        this.todos = this.leftTodos;
                        }
                    });
                },
                clearAll: function () {
                    confirm('ç¡®è®¤æ¸…é™¤å…¨éƒ¨å¾…åŠäº‹é¡¹?').then((confirmed) => {
                        if (confirmed) {
                        this.todos.map(todo => todo.removed = true);
                        this.recycleBin.unshift(...this.todos);
                            this.todos = []
                        }
                    });
                    },
                //æ‹–æ‹½ ------------------
                dragstart: function (index) {
                        this.dragIndex = index;
                    },
                dragenter: function (e, index) {
                        e.preventDefault();
                    // é¿å…æºå¯¹è±¡è§¦å‘è‡ªèº«çš„dragenteräº‹ä»¶
                        if (this.dragIndex !== index) {
                            const source = this.filteredTodos[this.dragIndex];
                            this.filteredTodos.splice(this.dragIndex, 1);
                            this.filteredTodos.splice(index, 0, source);
                        // æ’åºå˜åŒ–åç›®æ ‡å¯¹è±¡çš„ç´¢å¼•å˜æˆæºå¯¹è±¡çš„ç´¢å¼•
                            this.dragIndex = index;
                        }
                    },
                dragover: function (e, index) {
                        e.preventDefault();
                    },
                // JSé’©å­ åŠ è½½åŠ¨ç”»
                    beforeEnter(dom) {
                        dom.classList.add('drag-enter-active');
                        // åˆå§‹çŠ¶æ€ï¼šå®Œå…¨é€æ˜ï¼Œå‘ä¸Šåç§»ï¼Œå¹¶ä¸”é«˜åº¦å‡å°‘
                        dom.style.opacity = '0';
                        dom.style.transform = 'translateY(-15px)';
                        dom.style.maxHeight = '0';
                        dom.style.overflow = 'hidden';
                    },
                    enter(dom, done) {
                        let delay = dom.dataset.delay;
                        // å¼ºåˆ¶æµè§ˆå™¨é‡ç»˜ä»¥ç¡®ä¿è¿‡æ¸¡æ•ˆæœæ­£å¸¸æ˜¾ç¤º
                        dom.offsetHeight;
                        
                        setTimeout(() => {
                            this.delayTime = '1';
                            // æ·»åŠ è¿‡æ¸¡å±æ€§ï¼ŒåŒ…æ‹¬é«˜åº¦å˜åŒ–
                            dom.style.transition = `opacity 0.6s cubic-bezier(0.34, 1.56, 0.64, 1), 
                                              transform 0.6s cubic-bezier(0.34, 1.56, 0.64, 1), 
                                              max-height 0.5s cubic-bezier(0.34, 1.56, 0.64, 1)`;
                            // è®¾ç½®æœ€ç»ˆçŠ¶æ€ï¼šå®Œå…¨ä¸é€æ˜ï¼Œä½ç½®å½’é›¶ï¼Œé«˜åº¦æ¢å¤
                            dom.style.opacity = '1';
                            dom.style.transform = 'translateY(0)';
                            dom.style.maxHeight = '150px'; // å‡å°‘é«˜åº¦
                            
                            let transitionend = window.ontransitionend ? "transitionend" :"webkitTransitionEnd";
                            dom.addEventListener(transitionend, function onEnd() {
                                dom.removeEventListener(transitionend, onEnd);
                                // æ¸…é™¤æ ·å¼ä»¥é¿å…å¹²æ‰°åç»­æ“ä½œ
                                dom.style.transition = '';
                                dom.style.maxHeight = '';
                                dom.style.overflow = '';
                                done();
                            });
                        }, delay);
                    },
                    afterEnter(dom) {
                        // ç¡®ä¿æ‰€æœ‰è¿‡æ¸¡æ ·å¼è¢«æ¸…é™¤
                        dom.classList.remove('drag-enter-active');
                        dom.style.opacity = '';
                        dom.style.transform = '';
                        dom.style.maxHeight = '';
                        dom.style.overflow = '';
                    },
                saveLanguage: function(lang) {
                    // å§‹ç»ˆè®¾ç½®ä¸ºä¸­æ–‡
                    localStorage.setItem('uiineed-todos-lang', 'zh');
                },
                // æ–°å¢AEåŠŸèƒ½ç›¸å…³æ–¹æ³•
                createTodoLayers: function() {
                    if (typeof csInterface === 'undefined' || !csInterface) {
                        alert('éAEç¯å¢ƒï¼Œæ— æ³•åˆ›å»ºå›¾å±‚');
                        return;
                    }
                    
                    var todosStr = JSON.stringify(this.todos);
                    csInterface.evalScript('$.todo.createTodoLayers("' + encodeURIComponent(todosStr) + '")', (result) => {
                        try {
                            var response = JSON.parse(result);
                            if (response.success) {
                                alert('å·²æˆåŠŸåˆ›å»ºå¾…åŠäº‹é¡¹å›¾å±‚ï¼');
                            } else {
                                alert('åˆ›å»ºå›¾å±‚å¤±è´¥: ' + (response.error || 'æœªçŸ¥é”™è¯¯'), 'é”™è¯¯');
                            }
                        } catch(e) {
                            alert('æ“ä½œå¤±è´¥: ' + e.message, 'é”™è¯¯');
                        }
                    });
                },
                
                updateTodoLayers: function() {
                    if (!csInterface) {
                        alert('éAEç¯å¢ƒï¼Œæ— æ³•æ›´æ–°å›¾å±‚');
                        return;
                    }
                    
                    var todosStr = JSON.stringify(this.todos);
                    csInterface.evalScript('$.todo.updateTodoLayers("' + encodeURIComponent(todosStr) + '")', (result) => {
                        try {
                            var response = JSON.parse(result);
                            if (response.success) {
                                alert('å·²æˆåŠŸæ›´æ–°å¾…åŠäº‹é¡¹å›¾å±‚çŠ¶æ€ï¼');
                            } else {
                                alert('æ›´æ–°å›¾å±‚å¤±è´¥: ' + (response.error || 'æœªçŸ¥é”™è¯¯'), 'é”™è¯¯');
                            }
                        } catch(e) {
                            alert('æ“ä½œå¤±è´¥: ' + e.message, 'é”™è¯¯');
                        }
                    });
                },
                handleSaveClick: function(event) {
                    if (event.altKey) {
                        if (typeof csInterface !== 'undefined' && csInterface) {
                            csInterface.evalScript('$.todo.openStorageFolder()', function(result) {
                                console.log("[ExtendScript $.todo.openStorageFolder RAW RESULT]:", result);
                                try {
                                    var res = JSON.parse(result);
                                    if (!res.success) {
                                        alert("æ— æ³•æ‰“å¼€æ–‡ä»¶å¤¹: " + (res.error || "æœªçŸ¥é”™è¯¯"));
                                    }
                                } catch (e) {
                                    console.error("[ExtendScript $.todo.openStorageFolder JSON PARSE ERROR]:", e, "\n[RAW RESULT]:", result);
                                    alert("æ‰“å¼€æ–‡ä»¶å¤¹æ“ä½œè¿”å›å¼‚å¸¸ï¼Œæˆ–ç»“æœæ— æ³•è§£æã€‚è¯·æŸ¥çœ‹æ§åˆ¶å°ã€‚");
                                }
                            });
                        } else {
                            alert('æœªåœ¨CEPç¯å¢ƒä¸­è¿è¡Œï¼Œæ— æ³•æ‰“å¼€æ–‡ä»¶å¤¹ã€‚');
                        }
                    } else {
                        this.saveTodosToFile();
                    }
                },
                saveTodosToFile: function() {
                        if (typeof csInterface !== 'undefined' && csInterface) {
                            try {
                                var todosStr = JSON.stringify(this.todos);
                                csInterface.evalScript('$.todo.saveTodos("' + encodeURIComponent(todosStr) + '")', function(result) {
                                    console.log("[ExtendScript $.todo.saveTodos RAW RESULT]:", result);
                                    try {
                                        var response = JSON.parse(result);
                                        if (response.success) {
                                            alert('å·²ä¿å­˜!');
                                        } else {
                                            alert('ä¿å­˜åˆ°æœ¬åœ°æ–‡ä»¶å¤±è´¥ï¼š\n' + response.error);
                                            console.error("Save to file failed (ExtendScript reported error):", response.error);
                                        }
                                    } catch (e) {
                                        console.error("[ExtendScript $.todo.saveTodos JSON PARSE ERROR]:", e, "\n[RAW RESULT]:", result);
                                        alert('ä¿å­˜æ“ä½œè¿”å›å¼‚å¸¸ï¼Œæˆ–ç»“æœæ— æ³•è§£æã€‚\nè¯·æŸ¥çœ‹æ§åˆ¶å° (F12 -> Console) è·å–è¯¦ç»†é”™è¯¯ä¿¡æ¯ã€‚\nåŸå§‹è¿”å›: "' + result + '"');
                                    }
                                });
                            } catch (e) {
                                console.error("[JavaScript Call to csInterface.evalScript ERROR]:", e);
                                alert('æ‰§è¡Œä¿å­˜åˆ°æœ¬åœ°æ–‡ä»¶æ“ä½œæ—¶å‘ç”Ÿ JavaScript é”™è¯¯ã€‚è¯·æŸ¥çœ‹æ§åˆ¶å°ã€‚');
                            }
                        } else {
                            alert('æœªåœ¨CEPç¯å¢ƒä¸­è¿è¡Œï¼Œæ— æ³•ä¿å­˜åˆ°æœ¬åœ°æ–‡ä»¶ã€‚');
                        }
                    },
                handleGlobalKeyDown(event) { 
                        if (event.key === 'Alt') {
                            this.isAltPressed = true;
                        }
                    },
                    handleGlobalKeyUp(event) { 
                        if (event.key === 'Alt') {
                            this.isAltPressed = false;
                        }
                    },
                    triggerImport: function() { // å¯¼å…¥é€»è¾‘ (ä¿æŒä¸å˜ï¼Œä¹‹å‰å·²æ•´åˆ)
                        var self = this; 
                        if (typeof csInterface !== 'undefined' && csInterface) {
                            csInterface.evalScript('File.openDialog("é€‰æ‹©å¾…åŠäº‹é¡¹æ–‡ä»¶", "*.list;*.json;*.txt", false)', function(filePath) {
                                if (!filePath) return;
                                const readScript = `
                                (function() {
                                    try {
                                        var file = new File(decodeURI("${encodeURI(filePath)}"));
                                        file.open("r");
                                        file.encoding = "UTF-8";
                                        var content = file.read();
                                        file.close();
                                        return JSON.stringify({success: true, content: content, path: decodeURI(file.fsName)});
                                    } catch(e) {
                                        return JSON.stringify({success: false, error: e.message});
                                    }
                                })();`;
                                csInterface.evalScript(readScript, function(result) {
                                    try {
                                        const response = JSON.parse(result);
                                        if (response.success) {
                                            // ä¸å†ç›´æ¥è§£æå’Œåˆå¹¶ï¼Œè€Œæ˜¯å°†æ–‡ä»¶å†…å®¹å­—ç¬¦ä¸²ä¼ é€’ç»™ ExtendScript
                                            csInterface.evalScript(`$.todo.importAndReplaceData(${JSON.stringify(response.content)})`, function (resultStr) {
                                                try {
                                                    var evalResponse = JSON.parse(resultStr);
                                                    if (evalResponse.success) {
                                                        // ä½¿ç”¨ ExtendScript è¿”å›å¹¶å¤„ç†è¿‡çš„æ•°æ®æ›´æ–° Vue
                                                        self.todos = evalResponse.data;
                                                        todoStorage.save(self.todos); // ä¿å­˜åˆ° localStorage
                                                        
                                                        // å¤„ç†æ ‡è¯­æ›´æ–°
                                                        if (evalResponse.slogan) {
                                                            localStorage.setItem('uiineed-slogan', evalResponse.slogan);
                                                            self.slogan = evalResponse.slogan;
                                                        }
                                                        
                                                        alert('é¢„è®¾å·²æˆåŠŸå¯¼å…¥å¹¶è¦†ç›–æœ¬åœ° todo.listï¼');
                                                        // self.currentFilter = 'all'; // å¯é€‰ï¼šé‡ç½®ç­›é€‰å™¨
                                                    } else {
                                                        console.error("Import and Replace Error (ExtendScript):", evalResponse.error);
                                                        alert('å¯¼å…¥é¢„è®¾å¤±è´¥ (ExtendScript): ' + evalResponse.error, 'é”™è¯¯');
                                                    }
                                                } catch (evalError) {
                                                    console.error("Error parsing ExtendScript response:", evalError, "Raw response:", resultStr);
                                                    alert('å¤„ç†å¯¼å…¥ç»“æœæ—¶å‡ºé”™: ' + evalError.toString(), 'é”™è¯¯');
                                                }
                                            });
                                        } else {
                                            alert('è¯»å–æ–‡ä»¶å¤±è´¥ï¼š' + response.error, 'é”™è¯¯');
                                        }
                                    } catch(e) {
                                        console.error("æ— æ³•è§£æè¯»å–ç»“æœ:", e);
                                        alert('è¯»å–è¿‡ç¨‹å‘ç”Ÿé”™è¯¯', 'é”™è¯¯');
                                    }
                                });
                            });
                        } else {
                            var tempFileInput = document.createElement('input');
                            tempFileInput.type = 'file';
                            tempFileInput.accept = '.list,.json,.txt';
                            tempFileInput.style.display = 'none';
                            document.body.appendChild(tempFileInput);
                            tempFileInput.onchange = function(event) {
                                var file = event.target.files[0];
                                if (file) {
                                    var reader = new FileReader();
                                    reader.onload = function (e) {
                                        var fileContent = e.target.result;
                                        try {
                                            // ä¸å†ç›´æ¥è§£æå’Œåˆå¹¶ï¼Œè€Œæ˜¯å°†æ–‡ä»¶å†…å®¹å­—ç¬¦ä¸²ä¼ é€’ç»™ ExtendScript
                                            csInterface.evalScript(`$.todo.importAndReplaceData(${JSON.stringify(fileContent)})`, function (resultStr) {
                                                try {
                                                    var result = JSON.parse(resultStr);
                                                    if (result.success) {
                                                        // ä½¿ç”¨ ExtendScript è¿”å›å¹¶å¤„ç†è¿‡çš„æ•°æ®æ›´æ–° Vue
                                                        self.todos = result.data;
                                                        todoStorage.save(self.todos); // ä¿å­˜åˆ° localStorage
                                                        
                                                        // å¤„ç†æ ‡è¯­æ›´æ–°
                                                        if (result.slogan) {
                                                            localStorage.setItem('uiineed-slogan', result.slogan);
                                                            self.slogan = result.slogan;
                                                        }
                                                        
                                                        self.showToast('é¢„è®¾å·²æˆåŠŸå¯¼å…¥å¹¶è¦†ç›–æœ¬åœ° todo.listï¼', 'success');
                                                        self.currentFilter = 'all'; // é‡ç½®ç­›é€‰å™¨ä»¥æ˜¾ç¤ºæ‰€æœ‰ä»»åŠ¡
                                                    } else {
                                                        console.error("Import and Replace Error (ExtendScript):", result.error);
                                                        self.showToast('å¯¼å…¥é¢„è®¾å¤±è´¥ (ExtendScript): ' + result.error, 'error');
                                                    }
                                                } catch (evalError) {
                                                    console.error("Error parsing ExtendScript response:", evalError, "Raw response:", resultStr);
                                                    self.showToast('å¤„ç†å¯¼å…¥ç»“æœæ—¶å‡ºé”™: ' + evalError.toString(), 'error');
                                                }
                                            });
                                        } catch (err) {
                                            console.error("Error reading or processing file:", err);
                                            self.showToast('è¯»å–æˆ–å¤„ç†æ–‡ä»¶æ—¶å‡ºé”™: ' + err.message, 'error');
                                        }
                                    };
                                    reader.onerror = function (e) {
                                        console.error("File reading error:", e);
                                        self.showToast('è¯»å–æ–‡ä»¶å¤±è´¥!', 'error');
                                    };
                                    if (file.name.endsWith('.json') || file.name.endsWith('.list')) {
                                        reader.readAsText(file);
                                    } else {
                                        self.showToast('è¯·é€‰æ‹© .json æˆ– .list æ–‡ä»¶!', 'warning');
                                    }
                                }
                                // é‡ç½®inputï¼Œä»¥ä¾¿å¯ä»¥å†æ¬¡é€‰æ‹©ç›¸åŒçš„æ–‡ä»¶
                                event.target.value = null;
                            };
                            tempFileInput.click();
                        }
                    },
                handleDocumentClick: function(event) {
                    // åˆ¤æ–­ç‚¹å‡»æ˜¯å¦åœ¨ä¾§è¾¹æ å¤–éƒ¨
                    const sideBar = document.querySelector('.side-bar');
                    if (sideBar && !this.isShow && !sideBar.contains(event.target)) {
                        // ç‚¹å‡»åœ¨ä¾§è¾¹æ å¤–éƒ¨ï¼Œå…³é—­ä¾§è¾¹æ 
                        this.sidebarEntering = false;
                        this.sidebarExiting = true;
                        
                        setTimeout(() => {
                            this.isShow = true;
                            this.sidebarExiting = false;
                            this.shortCut = 'å…³';
                        }, 300);
                        }
                    },
            },
                // mounted æ–¹æ³•åœ¨å‰é¢å·²ç»å®šä¹‰ï¼Œè¿™é‡Œä¸éœ€è¦é‡å¤å®šä¹‰
                beforeDestroy() { // æ–°å¢ï¼šç§»é™¤Alté”®äº‹ä»¶ç›‘å¬
                    window.removeEventListener('keydown', this.handleGlobalKeyDown);
                    window.removeEventListener('keyup', this.handleGlobalKeyUp);
                    document.removeEventListener('click', this.handleDocumentClick);
                    
                    // æ¸…é™¤å¯èƒ½å­˜åœ¨çš„å®šæ—¶å™¨
                    if (this.sidebarTimer) {
                        clearTimeout(this.sidebarTimer);
                    }
                    
                    // ç§»é™¤Escé”®å…³é—­å¿«é€ŸæŒ‡å—çš„äº‹ä»¶ç›‘å¬
                    document.removeEventListener('keydown', (e) => {
                        if (e.key === 'Escape' && this.isQuickGuideVisible) {
                            this.hideQuickGuide();
                        }
                    });
                },
                directives: {
                    focus: {
                    inserted: function (el) {
                            el.focus()
                        }
                    }
                },
                computed: {
                emptyChecked: function () {
                        return this.newTodoTitle.length === 0 && this.checkEmpty
                    },
                leftTodos: function () {
                    return this.todos.filter(function (todo) {
                            return !todo.completed
                        })
                    },
                leftTodosCount: function () {
                        return this.leftTodos.length
                    },

                hasRemovedTodo: function () {
                        return !!this.removedTodo
                    },
                completedTodos: function () {
                    return this.todos.filter(function (todo) {
                            return todo.completed
                        })
                    },
                completedTodosCount: function () {
                        return this.completedTodos.length
                    },
                filteredTodos: function () {
                        if (this.intention === 'ongoing') {
                            return this.leftTodos
                        } else if (this.intention === 'completed') {
                            return this.completedTodos
                        } else if (this.intention === 'removed') {
                            return this.recycleBin
                        } else {
                            return this.todos
                        }
                    },
                    showEmptyTips() {
                        return this.filteredTodos.length === 0 && this.intention !== 'removed';
                },
                saveLocalButtonComputedText() { 
                    if (this.isAltPressed && this.isMouseOverSaveButton) {
                        return 'æ‰“å¼€æœ¬åœ°é¢„è®¾';
                    }
                    return 'ä¿å­˜åˆ°æœ¬åœ°';
                }
            },
                })
        </script>
        <script>
        // ä¿®æ”¹å¯¼å‡ºå¯¼å…¥é€»è¾‘ï¼Œä½¿ç”¨CEPä¸ExtendScriptäº¤äº’
        // const handleClickDownload = () => { ... }; // è¿™éƒ¨åˆ†é€»è¾‘å·²ç§»å…¥ triggerExport Vue method

        // å¯¼å…¥æ–‡ä»¶
        // let tempFileInput = null; 
        // document.getElementById('import').addEventListener('click', function() { ... }); // è¿™éƒ¨åˆ†é€»è¾‘å·²ç§»å…¥ triggerImport Vue method
        
        // æ›´æ–°é¡µé¢å†…å®¹å‡½æ•°
        // function updatePageContent(data) { // è¿™ä¸ªå‡½æ•°ä¸å†å•ç‹¬éœ€è¦ï¼Œç›´æ¥æ“ä½œ this.todos
        // app.todos = data;
        // }
        </script>

    </body>
</html>